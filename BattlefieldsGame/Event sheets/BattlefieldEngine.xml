<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>BattlefieldEngine</name>
    <events>
        <variable constant="0" name="TouchX" sid="6534365453199326" static="0" type="number">0</variable>
        <variable constant="0" name="Generalship" sid="2006331477994871" static="0" type="number">0</variable>
        <variable constant="0" name="TouchY" sid="6502670546669811" static="0" type="number">0</variable>
        <variable constant="0" name="isTouching" sid="3871697111663047" static="0" type="number">0</variable>
        <variable constant="0" name="unitIsSelected" sid="9276592121856374" static="0" type="number">0</variable>
        <variable constant="0" name="defaultTimeScale" sid="5962954180919954" static="0" type="number">0.7</variable>
        <event-group description="" sid="8697467225186843" title="Initialization and Functions">
            <sub-events>
                <event-block sid="5089396146406227">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="7438148368626863" type="System" />
                    </conditions>
                    <actions>
                        <action behavior="Physics_Soldier" id="12" name="Set world gravity" sid="7095119976979433" type="Soldier">
                            <param id="0" name="Gravity">0</param>
                        </action>
                        <action id="-13" name="Set time scale" sid="6902015105265496" type="System">
                            <param id="0" name="Time scale">defaultTimeScale</param>
                        </action>
                        <action id="-15" name="Set visible" sid="7457187323662698" type="Unit">
                            <param id="0" name="Visibility">0</param>
                        </action>
                        <action id="-15" name="Set visible" sid="2624873201549082" type="UnitTarget">
                            <param id="0" name="Visibility">0</param>
                        </action>
                        <action id="-15" name="Set visible" sid="5956505144121136" type="SoldierCoordinates">
                            <param id="0" name="Visibility">0</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="6527053038597033">
                            <conditions>
                                <condition id="-3" inverted="1" name="Is on-screen" sid="574133937014767" type="Unit" />
                            </conditions>
                            <actions>
                                <action id="-9" name="Destroy" sid="5239013800001971" type="Unit" />
                            </actions>
                        </event-block>
                        <event-block sid="5476738936184524">
                            <conditions>
                                <condition id="-3" inverted="1" name="Is on-screen" sid="8030134683958496" type="SoldierCoordinates" />
                            </conditions>
                            <actions>
                                <action id="-9" name="Destroy" sid="9919415072918224" type="SoldierCoordinates" />
                            </actions>
                        </event-block>
                        <event-block sid="3050332836498712">
                            <conditions>
                                <condition id="-3" inverted="1" name="Is on-screen" sid="506463069114975" type="BboxUnit" />
                            </conditions>
                            <actions>
                                <action id="-9" name="Destroy" sid="3860265117544883" type="BboxUnit" />
                            </actions>
                        </event-block>
                        <event-block sid="3404006935811206">
                            <conditions>
                                <condition id="-3" inverted="1" name="Is on-screen" sid="3100583871177613" type="Soldier" />
                            </conditions>
                            <actions>
                                <action id="-9" name="Destroy" sid="5115015853847359" type="Soldier" />
                            </actions>
                        </event-block>
                        <event-block sid="560429733973175">
                            <conditions>
                                <condition id="-3" inverted="1" name="Is on-screen" sid="9252507652048468" type="UnitTarget" />
                            </conditions>
                            <actions>
                                <action id="-9" name="Destroy" sid="5198005940579906" type="UnitTarget" />
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="6935621490480811">
                    <conditions>
                        <condition id="0" name="On function" sid="4237819790074723" type="Function">
                            <param id="0" name="Name">&quot;setUnitBoundaries&quot;</param>
                        </condition>
                        <condition id="-14" name="Pick by unique ID" sid="4767450626464642" type="Unit">
                            <param id="0" name="Unique ID">Function.Param(0)</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="9932826547327907">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="5439837949196704" type="Soldier">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">Unit.UID</param>
                                </condition>
                                <condition id="-11" name="For Each" sid="8829006491588129" type="System">
                                    <param id="0" name="Object">Soldier</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="9102814774989084" type="Unit">
                                    <param id="0" name="Instance variable">minX</param>
                                    <param id="1" name="Value">min(Unit.minX, Soldier.X)</param>
                                </action>
                                <action id="-10" name="Set value" sid="1815141034956627" type="Unit">
                                    <param id="0" name="Instance variable">maxX</param>
                                    <param id="1" name="Value">max(Unit.maxX, Soldier.X)</param>
                                </action>
                                <action id="-10" name="Set value" sid="4323338533641319" type="Unit">
                                    <param id="0" name="Instance variable">minY</param>
                                    <param id="1" name="Value">min(Unit.minY, Soldier.Y)</param>
                                </action>
                                <action id="-10" name="Set value" sid="4892626080022722" type="Unit">
                                    <param id="0" name="Instance variable">maxY</param>
                                    <param id="1" name="Value">max(Unit.maxY, Soldier.Y)</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>Set Status box</comment>
                <event-block sid="535773568396988">
                    <conditions>
                        <condition id="-6" name="Every X seconds" sid="9309965691341082" type="System">
                            <param id="0" name="Interval (seconds)">1.0</param>
                        </condition>
                        <condition id="-11" name="For Each" sid="4614056594602806" type="System">
                            <param id="0" name="Object">Unit</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="1803620228258137" type="Status">
                            <param id="0" name="Instance variable">UnitID</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">Unit.UID</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Set text" sid="9409090683753594" type="Status">
                            <param id="0" name="Text">Unit.UnitStatus</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Reset Bounding Box and recalculate it</comment>
                <variable constant="0" name="BBoxMargin" sid="4109713712653678" static="0" type="number">40</variable>
                <event-block sid="5703545923563704">
                    <conditions>
                        <condition id="-6" name="Every X seconds" sid="79908719204739" type="System">
                            <param id="0" name="Interval (seconds)">0.2</param>
                        </condition>
                        <condition id="-11" name="For Each" sid="7236192016653334" type="System">
                            <param id="0" name="Object">Unit</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="3442348112900667" type="BboxUnit">
                            <param id="0" name="Instance variable">UnitID</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">Unit.UID</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="8595921457371632" type="Unit">
                            <param id="0" name="Instance variable">minX</param>
                            <param id="1" name="Value">9999</param>
                        </action>
                        <action id="-10" name="Set value" sid="3253923303929336" type="Unit">
                            <param id="0" name="Instance variable">maxX</param>
                            <param id="1" name="Value">-9999</param>
                        </action>
                        <action id="-10" name="Set value" sid="2235574589178272" type="Unit">
                            <param id="0" name="Instance variable">minY</param>
                            <param id="1" name="Value">9999</param>
                        </action>
                        <action id="-10" name="Set value" sid="8334697697551994" type="Unit">
                            <param id="0" name="Instance variable">maxY</param>
                            <param id="1" name="Value">-9999</param>
                        </action>
                        <action id="0" name="Call function" sid="7013727865916016" type="Function">
                            <param id="0" name="Name">&quot;setUnitBoundaries&quot;</param>
                            <param id="1" name="Parameter {n}">Unit.UID</param>
                        </action>
                        <action id="-3" name="Set position" sid="6742906815035485" type="BboxUnit">
                            <param id="0" name="X">Unit.minX-BBoxMargin</param>
                            <param id="1" name="Y">Unit.minY-BBoxMargin</param>
                        </action>
                        <action id="-7" name="Set size" sid="8406341130415094" type="BboxUnit">
                            <param id="0" name="Width">Unit.maxX-Unit.minX+BBoxMargin*2</param>
                            <param id="1" name="Height">Unit.maxY-Unit.minY+BBoxMargin*2</param>
                        </action>
                        <action id="-3" name="Set position" sid="2143066520021434" type="Unit">
                            <param id="0" name="X">Unit.minX-BBoxMargin</param>
                            <param id="1" name="Y">Unit.minY-BBoxMargin</param>
                        </action>
                        <action id="-7" name="Set size" sid="3806840466993718" type="Unit">
                            <param id="0" name="Width">Unit.maxX-Unit.minX+BBoxMargin*2</param>
                            <param id="1" name="Height">Unit.maxY-Unit.minY+BBoxMargin*2</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="9505113320599094" title="Creating Units">
            <sub-events>
                <event-block sid="5792680463949762">
                    <conditions>
                        <condition id="-18" name="On created" sid="8051724990645311" type="Unit" />
                    </conditions>
                    <actions>
                        <action id="-15" name="Set visible" sid="7819885533820885" type="Unit">
                            <param id="0" name="Visibility">0</param>
                        </action>
                        <action id="0" name="Spawn another object" sid="1977901240138629" type="Unit">
                            <param id="0" name="Object">UnitTarget</param>
                            <param id="1" name="Layer">1</param>
                            <param id="2" name="Image point">2</param>
                        </action>
                        <action id="-15" name="Set visible" sid="7545408757095934" type="UnitTarget">
                            <param id="0" name="Visibility">0</param>
                        </action>
                        <action id="-10" name="Set value" sid="1480478445244275" type="UnitTarget">
                            <param id="0" name="Instance variable">UnitID</param>
                            <param id="1" name="Value">Unit.UID</param>
                        </action>
                        <action id="-7" name="Set size" sid="3031885718028547" type="UnitTarget">
                            <param id="0" name="Width">Unit.Width</param>
                            <param id="1" name="Height">Unit.Height</param>
                        </action>
                        <action id="-8" name="Set angle" sid="266937736109289" type="UnitTarget">
                            <param id="0" name="Angle">90</param>
                        </action>
                        <action id="-3" name="Create object" sid="8160429922904502" type="System">
                            <param id="0" name="Object to create">BboxUnit</param>
                            <param id="1" name="Layer">2</param>
                            <param id="2" name="X">-100</param>
                            <param id="3" name="Y">-100</param>
                        </action>
                        <action id="-10" name="Set value" sid="6398882883918124" type="BboxUnit">
                            <param id="0" name="Instance variable">UnitID</param>
                            <param id="1" name="Value">Unit.UID</param>
                        </action>
                        <action id="0" name="Spawn another object" sid="9951398594092021" type="Unit">
                            <param id="0" name="Object">Status</param>
                            <param id="1" name="Layer">1</param>
                            <param id="2" name="Image point">1</param>
                        </action>
                        <action id="-10" name="Set value" sid="7926216203541769" type="Status">
                            <param id="0" name="Instance variable">UnitID</param>
                            <param id="1" name="Value">Unit.UID</param>
                        </action>
                        <action behavior="Pin" id="0" name="Pin to object" sid="6280760195237176" type="Status">
                            <param id="0" name="Pin to">Unit</param>
                            <param id="1" name="Mode">1</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="1433761405116472">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="3519750451052781" type="Unit">
                                    <param id="0" name="Instance variable">UnitSide</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;enemy&quot;</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="7913792310540142" type="UnitTarget">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">Unit.UID</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-8" name="Set angle" sid="9055779474338309" type="UnitTarget">
                                    <param id="0" name="Angle">0</param>
                                </action>
                                <action id="-8" name="Set angle" sid="3222963962349159" type="Unit">
                                    <param id="0" name="Angle">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>Create coordinates and soldiers</comment>
                        <event-block sid="9121214920577107">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="770650333205112" type="UnitTarget">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">Unit.UID</param>
                                </condition>
                                <condition id="-23" name="While" sid="7897114979954742" type="System" />
                                <condition id="-8" name="Compare two values" sid="516888565908778" type="System">
                                    <param id="0" name="First value">Unit.ActualSoldierCount_Unit</param>
                                    <param id="1" name="Comparison">2</param>
                                    <param id="2" name="Second value">Unit.MaxSoldierCount_Unit</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-3" name="Create object" sid="398367087818731" type="System">
                                    <param id="0" name="Object to create">SoldierCoordinates</param>
                                    <param id="1" name="Layer">0</param>
                                    <param id="2" name="X">Unit.X</param>
                                    <param id="3" name="Y">Unit.Y</param>
                                </action>
                                <action id="-15" name="Set visible" sid="765467787475951" type="SoldierCoordinates">
                                    <param id="0" name="Visibility">0</param>
                                </action>
                                <action id="-10" name="Set value" sid="7194250168808518" type="SoldierCoordinates">
                                    <param id="0" name="Instance variable">SoldierNumber</param>
                                    <param id="1" name="Value">Unit.ActualSoldierCount_Unit</param>
                                </action>
                                <action id="-10" name="Set value" sid="5366823040137511" type="SoldierCoordinates">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Value">Unit.UID</param>
                                </action>
                                <action id="0" name="Call function" sid="5528065280873199" type="Function">
                                    <param id="0" name="Name">&quot;PositionOneSoldier&quot;</param>
                                    <param id="1" name="Parameter {n}">UnitTarget.UID{###}SoldierCoordinates.UID</param>
                                </action>
                                <action id="0" name="Call function" sid="6576391638662956" type="Function">
                                    <param id="0" name="Name">&quot;CreateSoldier&quot;</param>
                                    <param id="1" name="Parameter {n}">Unit.UID{###}SoldierCoordinates.UID</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="6543767569815377" title="Creating Soldiers">
            <sub-events>
                <variable constant="0" name="CreatedSoldierUID" sid="1368526330119888" static="0" type="number">9999</variable>
                <event-block sid="809240558750837">
                    <conditions>
                        <condition id="0" name="On function" sid="4487500627329875" type="Function">
                            <param id="0" name="Name">&quot;CreateSoldier&quot;</param>
                        </condition>
                        <condition id="-14" name="Pick by unique ID" sid="3395850429925935" type="Unit">
                            <param id="0" name="Unique ID">Function.Param(0)</param>
                        </condition>
                        <condition id="-14" name="Pick by unique ID" sid="8124335119021822" type="SoldierCoordinates">
                            <param id="0" name="Unique ID">Function.Param(1)</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="5388549326560665">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="4968084837987278" type="Unit">
                                    <param id="0" name="Instance variable">UnitType</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;swordsmen&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-3" name="Create object" sid="6544959381663519" type="System">
                                    <param id="0" name="Object to create">EnemySwordInfantry</param>
                                    <param id="1" name="Layer">1</param>
                                    <param id="2" name="X">SoldierCoordinates.X</param>
                                    <param id="3" name="Y">SoldierCoordinates.Y</param>
                                </action>
                                <action id="-9" name="Set value" sid="4815010354102853" type="System">
                                    <param id="0" name="Variable">CreatedSoldierUID</param>
                                    <param id="1" name="Value">EnemySwordInfantry.UID</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="8787299867897139">
                            <conditions>
                                <condition id="-22" name="Else" sid="642653177595904" type="System" />
                                <condition id="-7" name="Compare instance variable" sid="177189131151897" type="Unit">
                                    <param id="0" name="Instance variable">UnitType</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;archers&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-3" name="Create object" sid="8122973921301431" type="System">
                                    <param id="0" name="Object to create">EnemyArcherInfantry</param>
                                    <param id="1" name="Layer">1</param>
                                    <param id="2" name="X">SoldierCoordinates.X</param>
                                    <param id="3" name="Y">SoldierCoordinates.Y</param>
                                </action>
                                <action id="-9" name="Set value" sid="5316838553073109" type="System">
                                    <param id="0" name="Variable">CreatedSoldierUID</param>
                                    <param id="1" name="Value">EnemyArcherInfantry.UID</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="1136764758840739">
                            <conditions>
                                <condition id="-22" name="Else" sid="7130684662841834" type="System" />
                                <condition id="-7" name="Compare instance variable" sid="4860343423013253" type="Unit">
                                    <param id="0" name="Instance variable">UnitType</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;spearmen&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-3" name="Create object" sid="3935045684377535" type="System">
                                    <param id="0" name="Object to create">EnemySpearInfantry</param>
                                    <param id="1" name="Layer">1</param>
                                    <param id="2" name="X">SoldierCoordinates.X</param>
                                    <param id="3" name="Y">SoldierCoordinates.Y</param>
                                </action>
                                <action id="-9" name="Set value" sid="3855519198147437" type="System">
                                    <param id="0" name="Variable">CreatedSoldierUID</param>
                                    <param id="1" name="Value">EnemySpearInfantry.UID</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="1003162359458151">
                            <conditions>
                                <condition id="-22" name="Else" sid="5987880270584134" type="System" />
                                <condition id="-7" name="Compare instance variable" sid="9665676223279173" type="Unit">
                                    <param id="0" name="Instance variable">UnitType</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;cavalry&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-3" name="Create object" sid="6183017432154985" type="System">
                                    <param id="0" name="Object to create">EnemyMeleeCavalry</param>
                                    <param id="1" name="Layer">1</param>
                                    <param id="2" name="X">SoldierCoordinates.X</param>
                                    <param id="3" name="Y">SoldierCoordinates.Y</param>
                                </action>
                                <action id="-9" name="Set value" sid="2992406027953962" type="System">
                                    <param id="0" name="Variable">CreatedSoldierUID</param>
                                    <param id="1" name="Value">EnemyMeleeCavalry.UID</param>
                                </action>
                                <action id="0" name="Spawn another object" sid="7992004625318711" type="EnemyMeleeCavalry">
                                    <param id="0" name="Object">Horse</param>
                                    <param id="1" name="Layer">1</param>
                                    <param id="2" name="Image point">0</param>
                                </action>
                                <action behavior="Pin" id="0" name="Pin to object" sid="3961042491358159" type="Horse">
                                    <param id="0" name="Pin to">EnemyMeleeCavalry</param>
                                    <param id="1" name="Mode">0</param>
                                </action>
                                <action id="9" name="Set scale" sid="4490882240425671" type="Horse">
                                    <param id="0" name="Scale">0.3</param>
                                </action>
                                <action id="-10" name="Set value" sid="6689343751455386" type="Horse">
                                    <param id="0" name="Instance variable">bodyUID</param>
                                    <param id="1" name="Value">CreatedSoldierUID</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="912227774429818">
                            <conditions>
                                <condition id="-14" name="Pick by unique ID" sid="224811013580157" type="Soldier">
                                    <param id="0" name="Unique ID">CreatedSoldierUID</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="5" name="Set frame" sid="4215322362268855" type="Soldier">
                                    <param id="0" name="Frame number">1</param>
                                </action>
                                <action id="0" name="Spawn another object" sid="1242903042707019" type="Soldier">
                                    <param id="0" name="Object">Heads</param>
                                    <param id="1" name="Layer">1</param>
                                    <param id="2" name="Image point">0</param>
                                </action>
                                <action behavior="Pin" id="0" name="Pin to object" sid="5915370458155739" type="Heads">
                                    <param id="0" name="Pin to">Soldier</param>
                                    <param id="1" name="Mode">0</param>
                                </action>
                                <action id="-10" name="Set value" sid="1903783713383694" type="Heads">
                                    <param id="0" name="Instance variable">bodyUID</param>
                                    <param id="1" name="Value">CreatedSoldierUID</param>
                                </action>
                                <action id="0" name="Spawn another object" sid="3902074162431285" type="Soldier">
                                    <param id="0" name="Object">Legs</param>
                                    <param id="1" name="Layer">0</param>
                                    <param id="2" name="Image point">0</param>
                                </action>
                                <action behavior="Pin" id="0" name="Pin to object" sid="798528519729641" type="Legs">
                                    <param id="0" name="Pin to">Soldier</param>
                                    <param id="1" name="Mode">0</param>
                                </action>
                                <action id="-10" name="Set value" sid="5645164226504972" type="Legs">
                                    <param id="0" name="Instance variable">bodyUID</param>
                                    <param id="1" name="Value">CreatedSoldierUID</param>
                                </action>
                                <action id="2" name="Stop" sid="4331713585861994" type="Heads" />
                                <action id="5" name="Set frame" sid="9502751738064092" type="Heads">
                                    <param id="0" name="Frame number">1</param>
                                </action>
                                <action id="9" name="Set scale" sid="5004130296762287" type="Soldier">
                                    <param id="0" name="Scale">0.15</param>
                                </action>
                                <action id="9" name="Set scale" sid="6939363599866442" type="Heads">
                                    <param id="0" name="Scale">0.15</param>
                                </action>
                                <action id="9" name="Set scale" sid="9990970051565675" type="Legs">
                                    <param id="0" name="Scale">0.15</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="8155686879399739">
                            <conditions>
                                <condition id="-14" name="Pick by unique ID" sid="3865212972256907" type="Soldier">
                                    <param id="0" name="Unique ID">CreatedSoldierUID</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="5" name="Set frame" sid="1554805572152706" type="Soldier">
                                    <param id="0" name="Frame number">1</param>
                                </action>
                                <action id="-10" name="Set value" sid="5265744234142824" type="Soldier">
                                    <param id="0" name="Instance variable">SoldierNumber</param>
                                    <param id="1" name="Value">Unit.ActualSoldierCount_Unit</param>
                                </action>
                                <action id="-10" name="Set value" sid="7037297266869013" type="Soldier">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Value">Unit.UID</param>
                                </action>
                                <action id="-8" name="Set angle" sid="95754580578457" type="Soldier">
                                    <param id="0" name="Angle">270</param>
                                </action>
                                <action id="-10" name="Set value" sid="2982741463997425" type="Soldier">
                                    <param id="0" name="Instance variable">SoldierCoordinatesID</param>
                                    <param id="1" name="Value">SoldierCoordinates.UID</param>
                                </action>
                                <action id="-10" name="Set value" sid="6639036573867135" type="Unit">
                                    <param id="0" name="Instance variable">ActualSoldierCount_Unit</param>
                                    <param id="1" name="Value">Self.ActualSoldierCount_Unit+ 1</param>
                                </action>
                                <action id="0" name="Spawn another object" sid="6448000822509915" type="Soldier">
                                    <param id="0" name="Object">HealthIndicator</param>
                                    <param id="1" name="Layer">2</param>
                                    <param id="2" name="Image point">0</param>
                                </action>
                                <action id="-10" name="Set value" sid="3287241893175452" type="HealthIndicator">
                                    <param id="0" name="Instance variable">SoldierID</param>
                                    <param id="1" name="Value">Soldier.UID</param>
                                </action>
                                <action id="-10" name="Set value" sid="55478496368087" type="HealthIndicator">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Value">Soldier.UnitID</param>
                                </action>
                                <action id="0" name="Set text" sid="4963992153215544" type="HealthIndicator">
                                    <param id="0" name="Text">round(Soldier.Health)</param>
                                </action>
                                <action id="-8" name="Set angle" sid="9252127886363019" type="HealthIndicator">
                                    <param id="0" name="Angle">0</param>
                                </action>
                                <action behavior="Pin" id="0" name="Pin to object" sid="438408073965448" type="HealthIndicator">
                                    <param id="0" name="Pin to">Soldier</param>
                                    <param id="1" name="Mode">1</param>
                                </action>
                                <action id="-10" name="Set value" sid="725628487136269" type="SoldierCoordinates">
                                    <param id="0" name="Instance variable">SoldierID</param>
                                    <param id="1" name="Value">Soldier.UID</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="533497785752432">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="3359142807436448" type="Unit">
                                            <param id="0" name="Instance variable">UnitSide</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;friendly&quot;</param>
                                        </condition>
                                        <condition id="-14" name="Pick by unique ID" sid="5528263955758404" type="FriendlySoldiers">
                                            <param id="0" name="Unique ID">CreatedSoldierUID</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-10" name="Set value" sid="5449150846959991" type="FriendlySoldiers">
                                            <param id="0" name="Instance variable">UnitIDFriendly</param>
                                            <param id="1" name="Value">Unit.UID</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="6307136467079648">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="7341306111598626" type="System" />
                                        <condition id="-7" name="Compare instance variable" sid="9755010587806505" type="Unit">
                                            <param id="0" name="Instance variable">UnitSide</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;enemy&quot;</param>
                                        </condition>
                                        <condition id="-14" name="Pick by unique ID" sid="5154603364918387" type="EnemySoldiers">
                                            <param id="0" name="Unique ID">CreatedSoldierUID</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-10" name="Set value" sid="3125569225428621" type="EnemySoldiers">
                                            <param id="0" name="Instance variable">UnitIDEnemy</param>
                                            <param id="1" name="Value">Unit.UID</param>
                                        </action>
                                        <action id="-8" name="Set angle" sid="9744561368831478" type="Soldier">
                                            <param id="0" name="Angle">90</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block disabled="1" sid="3491803204423785">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="1527444289800418" type="Unit">
                                    <param id="0" name="Instance variable">UnitSide</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;enemy&quot;</param>
                                </condition>
                                <condition id="-14" name="Pick by unique ID" sid="8670984775716968" type="Soldier">
                                    <param id="0" name="Unique ID">CreatedSoldierUID</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-8" name="Set angle" sid="6098773599476467" type="Soldier">
                                    <param id="0" name="Angle">90</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="253421396067857" title="Unit Positioning">
            <sub-events>
                <comment>The PositionSoldiers function takes the Unit Target UID and the Soldier Coordinates UID as parameters to calculate the positioning of a certain soldier in the unit. It sets the SoldierCoordinates X and Y. If the Soldier Coordinates UID is not passed, then the function sets the position for all the soldier coordinates in that respective unit.</comment>
                <variable constant="0" name="unitTargetAngle" sid="8203101844167841" static="0" type="number">0</variable>
                <variable constant="0" name="targetXTemp" sid="9481241000966064" static="0" type="number">0</variable>
                <variable constant="0" name="targetYTemp" sid="3638656011015246" static="0" type="number">0</variable>
                <variable constant="0" name="deltaX" sid="4745264756497811" static="0" type="number">0</variable>
                <variable constant="0" name="deltaY" sid="5560321545186909" static="0" type="number">0</variable>
                <variable comment="counts for each soldier in the unit" constant="0" name="soldierCounter" sid="4177173121706128" static="0" type="number">0</variable>
                <variable comment="Size of a soldier&apos;s surrounding area" constant="0" name="soldierSpacing" sid="6632159992215006" static="0" type="number">0</variable>
                <comment>Only used during initialization to calculate position for each newly added soldier.</comment>
                <event-block sid="2875681945638151">
                    <conditions>
                        <condition id="0" name="On function" sid="2087114291391918" type="Function">
                            <param id="0" name="Name">&quot;PositionOneSoldier&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <comment>First Calculate TargetXTemp. This places the soldier from left to right and from up to down starting in the top left corner. Then rotate it to receive TargetX, the real future coordinate of that soldier. Then Modify TargetXTemp to place the soldiers around the center-point of the unit and set CurrentX to that position. This will be used to rearrange the soldiers before moving them to their destination.</comment>
                        <event-block sid="2142644006448783">
                            <conditions>
                                <condition id="-14" name="Pick by unique ID" sid="2112561785753329" type="UnitTarget">
                                    <param id="0" name="Unique ID">Function.Param(0)</param>
                                </condition>
                                <condition id="-14" name="Pick by unique ID" sid="5907323590223835" type="SoldierCoordinates">
                                    <param id="0" name="Unique ID">Function.Param(1)</param>
                                </condition>
                                <condition id="-14" name="Pick by unique ID" sid="3854001804729238" type="Unit">
                                    <param id="0" name="Unique ID">UnitTarget.UnitID</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="326372220907446" type="System">
                                    <param id="0" name="Variable">soldierCounter</param>
                                    <param id="1" name="Value">SoldierCoordinates.SoldierNumber</param>
                                </action>
                                <action id="-9" name="Set value" sid="6841074168861534" type="System">
                                    <param id="0" name="Variable">unitTargetAngle</param>
                                    <param id="1" name="Value">(UnitTarget.Angle+90)%360</param>
                                </action>
                                <action id="-9" name="Set value" sid="7662619955515366" type="System">
                                    <param id="0" name="Variable">soldierSpacing</param>
                                    <param id="1" name="Value">3+SoldierCoordinates.Height</param>
                                </action>
                                <action id="-9" name="Set value" sid="5124096116693427" type="System">
                                    <param id="0" name="Variable">targetXTemp</param>
                                    <param id="1" name="Value">soldierCounter%round(UnitTarget.Height/SoldierSpacing)*SoldierSpacing+SoldierSpacing/2</param>
                                </action>
                                <action id="-9" name="Set value" sid="8807356189035343" type="System">
                                    <param id="0" name="Variable">targetYTemp</param>
                                    <param id="1" name="Value">ceil((soldierCounter+1)/round(UnitTarget.Height/SoldierSpacing))*SoldierSpacing-SoldierSpacing/2</param>
                                </action>
                                <action id="-10" name="Set value" sid="6966846683467988" type="SoldierCoordinates">
                                    <param id="0" name="Instance variable">TargetX</param>
                                    <param id="1" name="Value">TargetXTemp*cos(UnitTargetAngle)-TargetYTemp*sin(UnitTargetAngle) + UnitTarget.X</param>
                                </action>
                                <action id="-10" name="Set value" sid="4291972364919733" type="SoldierCoordinates">
                                    <param id="0" name="Instance variable">TargetY</param>
                                    <param id="1" name="Value">TargetYTemp*cos(UnitTargetAngle)+TargetXTemp*sin(UnitTargetAngle)+UnitTarget.Y</param>
                                </action>
                                <action id="-3" name="Set position" sid="6413738790649577" type="SoldierCoordinates">
                                    <param id="0" name="X">Self.TargetX</param>
                                    <param id="1" name="Y">Self.TargetY</param>
                                </action>
                                <action id="-9" name="Set value" sid="5797534185391115" type="System">
                                    <param id="0" name="Variable">targetXTemp</param>
                                    <param id="1" name="Value">soldierCounter%round(UnitTarget.Height/SoldierSpacing)*SoldierSpacing+SoldierSpacing/2-UnitTarget.Height/2</param>
                                </action>
                                <action id="-9" name="Set value" sid="9097490953087848" type="System">
                                    <param id="0" name="Variable">targetYTemp</param>
                                    <param id="1" name="Value">ceil((soldierCounter+1)/round(UnitTarget.Height/SoldierSpacing))*SoldierSpacing-SoldierSpacing/2-UnitTarget.Width/2</param>
                                </action>
                                <action id="-10" name="Set value" sid="190489516622152" type="SoldierCoordinates">
                                    <param id="0" name="Instance variable">CurrentX</param>
                                    <param id="1" name="Value">TargetXTemp*cos(UnitTargetAngle)-TargetYTemp*sin(UnitTargetAngle) + Unit.ImagePointX(&quot;Center&quot;)</param>
                                </action>
                                <action id="-10" name="Set value" sid="6829236522298525" type="SoldierCoordinates">
                                    <param id="0" name="Instance variable">CurrentY</param>
                                    <param id="1" name="Value">TargetYTemp*cos(UnitTargetAngle)+TargetXTemp*sin(UnitTargetAngle) + Unit.ImagePointY(&quot;Center&quot;)</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>Only used when user is giving orders to calculate the selected unit&apos;s future position.</comment>
                <event-block sid="5182593939060196">
                    <conditions>
                        <condition id="0" name="On function" sid="723666739331754" type="Function">
                            <param id="0" name="Name">&quot;PositionAllSoldiers&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="2721335869188842" type="System">
                            <param id="0" name="Variable">soldierCounter</param>
                            <param id="1" name="Value">0</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="3216004482778364">
                            <conditions>
                                <condition id="-14" name="Pick by unique ID" sid="9631951398384844" type="UnitTarget">
                                    <param id="0" name="Unique ID">Function.Param(0)</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="9677766035648197" type="SoldierCoordinates">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">UnitTarget.UnitID</param>
                                </condition>
                                <condition id="-24" name="For Each (ordered)" sid="8859149792968499" type="System">
                                    <param id="0" name="Object">SoldierCoordinates</param>
                                    <param id="1" name="Expression">SoldierCoordinates.SoldierNumber</param>
                                    <param id="2" name="Order">0</param>
                                </condition>
                                <condition id="-14" name="Pick by unique ID" sid="656967878038113" type="Unit">
                                    <param id="0" name="Unique ID">UnitTarget.UnitID</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="3348526552372267" type="Soldier">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">UnitTarget.UnitID</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="8619487196456396" type="System">
                                    <param id="0" name="Variable">unitTargetAngle</param>
                                    <param id="1" name="Value">(UnitTarget.Angle+90)%360</param>
                                </action>
                                <action id="-9" name="Set value" sid="7523027109010698" type="System">
                                    <param id="0" name="Variable">soldierSpacing</param>
                                    <param id="1" name="Value">3+Soldier.Height</param>
                                </action>
                                <action id="-9" name="Set value" sid="9700287227167773" type="System">
                                    <param id="0" name="Variable">targetXTemp</param>
                                    <param id="1" name="Value">soldierCounter%round(UnitTarget.Height/SoldierSpacing)*SoldierSpacing+SoldierSpacing/2</param>
                                </action>
                                <action id="-9" name="Set value" sid="7096434953635341" type="System">
                                    <param id="0" name="Variable">targetYTemp</param>
                                    <param id="1" name="Value">ceil((soldierCounter+1)/round(UnitTarget.Height/SoldierSpacing))*SoldierSpacing-SoldierSpacing/2</param>
                                </action>
                                <action id="-10" name="Set value" sid="6344445954647019" type="SoldierCoordinates">
                                    <param id="0" name="Instance variable">TargetX</param>
                                    <param id="1" name="Value">TargetXTemp*cos(UnitTargetAngle)-TargetYTemp*sin(UnitTargetAngle) + UnitTarget.X</param>
                                </action>
                                <action id="-10" name="Set value" sid="528252959025204" type="SoldierCoordinates">
                                    <param id="0" name="Instance variable">TargetY</param>
                                    <param id="1" name="Value">TargetYTemp*cos(UnitTargetAngle)+TargetXTemp*sin(UnitTargetAngle)+UnitTarget.Y</param>
                                </action>
                                <action id="-9" name="Set value" sid="3123541403102669" type="System">
                                    <param id="0" name="Variable">targetXTemp</param>
                                    <param id="1" name="Value">TargetXTemp-UnitTarget.Height/2</param>
                                </action>
                                <action id="-9" name="Set value" sid="4886470488621242" type="System">
                                    <param id="0" name="Variable">targetYTemp</param>
                                    <param id="1" name="Value">TargetYTemp-UnitTarget.Width/2</param>
                                </action>
                                <action id="-10" name="Set value" sid="3171508076595096" type="SoldierCoordinates">
                                    <param id="0" name="Instance variable">CurrentX</param>
                                    <param id="1" name="Value">TargetXTemp*cos(UnitTargetAngle)-TargetYTemp*sin(UnitTargetAngle) + Unit.ImagePointX(&quot;Center&quot;)</param>
                                </action>
                                <action id="-10" name="Set value" sid="266766453261091" type="SoldierCoordinates">
                                    <param id="0" name="Instance variable">CurrentY</param>
                                    <param id="1" name="Value">TargetYTemp*cos(UnitTargetAngle)+TargetXTemp*sin(UnitTargetAngle) + Unit.ImagePointY(&quot;Center&quot;)</param>
                                </action>
                                <action id="-3" name="Set position" sid="8831494712084211" type="SoldierCoordinates">
                                    <param id="0" name="X">Self.TargetX</param>
                                    <param id="1" name="Y">Self.TargetY</param>
                                </action>
                                <action id="-9" name="Set value" sid="7897586431081759" type="System">
                                    <param id="0" name="Variable">soldierCounter</param>
                                    <param id="1" name="Value">soldierCounter+1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="3342614168970355">
                            <conditions>
                                <condition id="-14" name="Pick by unique ID" sid="5020494916787309" type="UnitTarget">
                                    <param id="0" name="Unique ID">Function.Param(0)</param>
                                </condition>
                                <condition id="-14" name="Pick by unique ID" sid="2133982891510191" type="Unit">
                                    <param id="0" name="Unique ID">UnitTarget.UnitID</param>
                                </condition>
                                <condition id="-7" inverted="1" name="Compare instance variable" sid="4280281792997455" type="Unit">
                                    <param id="0" name="Instance variable">UnitStatus</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;fleeing&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="153887931079252" type="Unit">
                                    <param id="0" name="Instance variable">UnitStatus</param>
                                    <param id="1" name="Value">&quot;hasOrders&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="387842610679262" title="Unit States">
            <sub-events>
                <event-block sid="5331028945290397">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="9445751226655642" type="Unit">
                            <param id="0" name="Instance variable">UnitStatus</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">&quot;passive&quot;</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="2430461510224553" type="Soldier">
                            <param id="0" name="Instance variable">UnitID</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">Unit.UID</param>
                        </condition>
                        <condition id="-4" name="Trigger once while true" sid="1291258997155557" type="System" />
                    </conditions>
                    <actions />
                </event-block>
                <event-block sid="323206034335564">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="6272956492447427" type="Unit">
                            <param id="0" name="Instance variable">UnitStatus</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">&quot;passive&quot;</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="3246691746450109" type="Unit">
                            <param id="0" name="Instance variable">Fatigue</param>
                            <param id="1" name="Comparison">4</param>
                            <param id="2" name="Value">10</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-12" name="Subtract from" sid="5185348283495473" type="Unit">
                            <param id="0" name="Instance variable">Fatigue</param>
                            <param id="1" name="Value">0.05</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="1066537644072557">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="5328252488717189" type="Unit">
                            <param id="0" name="Instance variable">UnitStatus</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">&quot;arranging&quot;</param>
                        </condition>
                        <condition id="-4" name="Trigger once while true" sid="7627837161142893" type="System" />
                    </conditions>
                    <actions>
                        <action id="-11" name="Add to" sid="5172088796480161" type="Unit">
                            <param id="0" name="Instance variable">Fatigue</param>
                            <param id="1" name="Value">5</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="8942970591873888">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="5341056461388173" type="Unit">
                            <param id="0" name="Instance variable">UnitStatus</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">&quot;moving&quot;</param>
                        </condition>
                        <condition id="-4" name="Trigger once while true" sid="2727150186706752" type="System" />
                    </conditions>
                    <actions>
                        <action id="-11" name="Add to" sid="4260724716085318" type="Unit">
                            <param id="0" name="Instance variable">Fatigue</param>
                            <param id="1" name="Value">5</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="2843401038312377">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="5401315771438843" type="Unit">
                            <param id="0" name="Instance variable">UnitStatus</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">&quot;fighting&quot;</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="4048183432840243" type="Soldier">
                            <param id="0" name="Instance variable">UnitID</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">Unit.UID</param>
                        </condition>
                        <condition id="-4" name="Trigger once while true" sid="759318955041338" type="System" />
                    </conditions>
                    <actions>
                        <action id="-11" name="Add to" sid="2950999698575917" type="Unit">
                            <param id="0" name="Instance variable">Fatigue</param>
                            <param id="1" name="Value">5</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="6902832884182934">
                    <conditions>
                        <condition id="-11" name="For Each" sid="4008088536949607" type="System">
                            <param id="0" name="Object">Unit</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="6243661277331237">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="620177830613623" type="Unit">
                                    <param id="0" name="Instance variable">UnitStatus</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;fleeing&quot;</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="1730730391362014" type="Soldier">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">Unit.UID</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-17" name="Move forward" sid="52243220011438" type="Soldier">
                                    <param id="0" name="Distance">Soldier.Pathfinding_Soldier.MaxSpeed*dt</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="241107848129817">
                            <conditions>
                                <condition id="-22" name="Else" sid="3632492514010878" type="System" />
                                <condition id="-8" name="Compare two values" sid="7209787434287001" type="System">
                                    <param id="0" name="First value">Unit.Fatigue/Unit.Morale</param>
                                    <param id="1" name="Comparison">5</param>
                                    <param id="2" name="Second value">1</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="618942531739218" type="UnitTarget">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">Unit.UID</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="5635241676342882" type="Soldier">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">Unit.UID</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="Pathfinding_Soldier" id="2" name="Stop" sid="2327935466559993" type="Soldier" />
                                <action behavior="Pathfinding_Soldier" id="10" name="Set rotate speed" sid="355195857248409" type="Soldier">
                                    <param id="0" name="Rotate speed">0</param>
                                </action>
                                <action id="-10" name="Set value" sid="1133388534184357" type="Unit">
                                    <param id="0" name="Instance variable">UnitStatus</param>
                                    <param id="1" name="Value">&quot;fleeing&quot;</param>
                                </action>
                                <action behavior="Pin_Soldier" disabled="1" id="1" name="Unpin" sid="4002002019455098" type="Soldier" />
                                <action id="-8" name="Set angle" sid="9049348804300693" type="Soldier">
                                    <param id="0" name="Angle">Unit.Angle-180</param>
                                </action>
                                <action id="-12" name="Subtract from" sid="3550032183516423" type="Unit">
                                    <param id="0" name="Instance variable">Morale</param>
                                    <param id="1" name="Value">10</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="6047004779570526">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="391272654754952" type="Unit">
                                    <param id="0" name="Instance variable">UnitStatus</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;preparesArranging&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Call function" sid="2234862017204749" type="Function">
                                    <param id="0" name="Name">&quot;ArrangeUnit&quot;</param>
                                    <param id="1" name="Parameter {n}">Unit.UID</param>
                                </action>
                                <action id="-10" name="Set value" sid="5345092112105717" type="Unit">
                                    <param id="0" name="Instance variable">UnitStatus</param>
                                    <param id="1" name="Value">&quot;arranging&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="1129372607553959">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="520969773260036" type="Unit">
                                    <param id="0" name="Instance variable">UnitStatus</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;preparesMoving&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Call function" sid="1223582996953902" type="Function">
                                    <param id="0" name="Name">&quot;MoveUnit&quot;</param>
                                    <param id="1" name="Parameter {n}">Unit.UID</param>
                                </action>
                                <action id="-10" name="Set value" sid="2745684477354958" type="Unit">
                                    <param id="0" name="Instance variable">UnitStatus</param>
                                    <param id="1" name="Value">&quot;moving&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="8727540044198607">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="7737661909470956" type="Unit">
                                    <param id="0" name="Instance variable">UnitStatus</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;backing away&quot;</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="4001986976554179" type="Soldier">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">Unit.UID</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="Pin_Soldier" disabled="1" id="1" name="Unpin" sid="937619065990375" type="Soldier" />
                                <action id="-23" name="Move at angle" sid="3816027111505524" type="Soldier">
                                    <param id="0" name="Angle">Soldier.Angle+180</param>
                                    <param id="1" name="Distance">0.2</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="7357191341253403" title="Unit Movement">
            <sub-events>
                <comment>Function to rearrange soldiers according to their future target, before ordering them to move.</comment>
                <event-block sid="8356771923882297">
                    <conditions>
                        <condition id="0" name="On function" sid="8181723978421919" type="Function">
                            <param id="0" name="Name">&quot;ArrangeUnit&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="9830161564095479">
                            <conditions>
                                <condition id="-14" name="Pick by unique ID" sid="8996536019356262" type="Unit">
                                    <param id="0" name="Unique ID">Function.Param(0)</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="8704149956987293" type="Soldier">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">Function.Param(0)</param>
                                </condition>
                                <condition id="-12" name="Repeat" sid="5163209332742143" type="System">
                                    <param id="0" name="Count">Unit.ActualSoldierCount_Unit</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <comment>Similar to the Hungarian Algorithm. We pick the coordinates furthest away from the unit, and then the soldier closest to those coordinates, and send that soldier on his way. For this, we also have to make sure that both the coordinates and the soldier have not been used more than once in this event, thus the &apos;isActive&apos; variable and the &apos;not calculating path&apos; and &apos;not moving on path&apos; conditions.</comment>
                                <event-block sid="8379311233888756">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="3234580042580681" type="SoldierCoordinates">
                                            <param id="0" name="Instance variable">UnitID</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">Unit.UID</param>
                                        </condition>
                                        <condition id="-8" name="Is boolean instance variable set" sid="3494907395204438" type="SoldierCoordinates">
                                            <param id="0" name="Instance variable">isActive</param>
                                        </condition>
                                        <condition id="-15" name="Pick nearest/furthest" sid="873750005619322" type="SoldierCoordinates">
                                            <param id="0" name="Which">1</param>
                                            <param id="1" name="X">Unit.ImagePointX(&quot;Center&quot;)</param>
                                            <param id="2" name="Y">Unit.ImagePointY(&quot;Center&quot;)</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-13" name="Set boolean" sid="4284316923545091" type="SoldierCoordinates">
                                            <param id="0" name="Instance variable">isActive</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="1994473994300082">
                                            <conditions>
                                                <condition behavior="Pathfinding_Soldier" id="3" inverted="1" name="Is calculating path" sid="4964422270130243" type="Soldier" />
                                                <condition behavior="Pathfinding_Soldier" id="4" inverted="1" name="Is moving along path" sid="7998204736459008" type="Soldier" />
                                                <condition id="-15" name="Pick nearest/furthest" sid="3683246972882002" type="Soldier">
                                                    <param id="0" name="Which">0</param>
                                                    <param id="1" name="X">SoldierCoordinates.X</param>
                                                    <param id="2" name="Y">SoldierCoordinates.Y</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action behavior="Pathfinding_Soldier" id="0" name="Find path" sid="7719650863256828" type="Soldier">
                                                    <param id="0" name="X">SoldierCoordinates.CurrentX</param>
                                                    <param id="1" name="Y">SoldierCoordinates.CurrentY</param>
                                                </action>
                                                <action id="-10" name="Set value" sid="3732449330432001" type="Soldier">
                                                    <param id="0" name="Instance variable">SoldierCoordinatesID</param>
                                                    <param id="1" name="Value">SoldierCoordinates.UID</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <comment>Reset isActive for Coordinates so they can be used again for the next path finding.</comment>
                        <event-block sid="1336430075659607">
                            <conditions>
                                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="851211962062546" type="SoldierCoordinates">
                                    <param id="0" name="Instance variable">isActive</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-13" name="Set boolean" sid="8091543484742023" type="SoldierCoordinates">
                                    <param id="0" name="Instance variable">isActive</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>Function to move soldiers of a unit to their (already positioned) units coordinates following the hungarian algorithm. Requires a Unit ID as Parameter. (Also see PositionAllSoldiers() )</comment>
                <event-block sid="9287999134333266">
                    <conditions>
                        <condition id="0" name="On function" sid="8412563573821783" type="Function">
                            <param id="0" name="Name">&quot;MoveUnit&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="7512636201535572">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="2210754490835437" type="Soldier">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">Function.Param(0)</param>
                                </condition>
                                <condition id="-11" name="For Each" sid="846962387408031" type="System">
                                    <param id="0" name="Object">Soldier</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <comment>Old, simple movement method. Simply send each one of the soldiers to his originally associated Coordinates. Has better performance, but is less realistic. This needs to be run &quot;for each Soldier&quot; instead of the &quot;repeat actualSoldierCount times&quot; condition.</comment>
                                <event-block sid="5147131752301606">
                                    <conditions>
                                        <condition id="-14" name="Pick by unique ID" sid="1004878720706251" type="SoldierCoordinates">
                                            <param id="0" name="Unique ID">Soldier.SoldierCoordinatesID</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action behavior="Pathfinding_Soldier" id="0" name="Find path" sid="3595953826994813" type="Soldier">
                                            <param id="0" name="X">SoldierCoordinates.X</param>
                                            <param id="1" name="Y">SoldierCoordinates.Y</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>When destination is reached, set status</comment>
                <event-block sid="4440707455322461">
                    <conditions>
                        <condition id="-11" name="For Each" sid="7292009233117847" type="System">
                            <param id="0" name="Object">Unit</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="6925977704962488" type="SoldierCoordinates">
                            <param id="0" name="Instance variable">UnitID</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">Unit.UID</param>
                        </condition>
                        <condition id="-15" name="Pick nearest/furthest" sid="5167988632609226" type="SoldierCoordinates">
                            <param id="0" name="Which">1</param>
                            <param id="1" name="X">Unit.ImagePointX(&quot;Center&quot;)</param>
                            <param id="2" name="Y">Unit.ImagePointY(&quot;Center&quot;)</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="1675016287839021">
                            <conditions>
                                <condition id="1" name="Is overlapping another object" sid="6395755086769037" type="Unit">
                                    <param id="0" name="Object">SoldierCoordinates</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="9447468250445818" type="Unit">
                                    <param id="0" name="Instance variable">UnitStatus</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;moving&quot;</param>
                                </condition>
                                <condition id="-4" name="Trigger once while true" sid="8971462448100388" type="System" />
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="9232554367943478" type="Unit">
                                    <param id="0" name="Instance variable">UnitStatus</param>
                                    <param id="1" name="Value">&quot;passive&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="5304924840934984">
                            <conditions>
                                <condition id="-36" name="Pick overlapping point" sid="4849313783524181" type="System">
                                    <param id="0" name="Object">Unit</param>
                                    <param id="1" name="X">SoldierCoordinates.CurrentX</param>
                                    <param id="2" name="Y">SoldierCoordinates.CurrentY</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="7073258047423425" type="Unit">
                                    <param id="0" name="Instance variable">UnitStatus</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;arranging&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="575214140002137" type="Unit">
                                    <param id="0" name="Instance variable">UnitStatus</param>
                                    <param id="1" name="Value">&quot;preparesMoving&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>Move Soldier</comment>
                <event-block sid="9766784303705798">
                    <conditions>
                        <condition behavior="Pathfinding_Soldier" id="0" name="On path found" sid="2856140204397504" type="Soldier" />
                    </conditions>
                    <actions>
                        <action behavior="Pathfinding_Soldier" id="1" name="Move along path" sid="2771277915108209" type="Soldier" />
                    </actions>
                </event-block>
                <event-block sid="6680631200195496">
                    <conditions>
                        <condition behavior="Pathfinding_Soldier" id="5" name="On arrived" sid="636002960185626" type="Soldier" />
                    </conditions>
                    <actions>
                        <action id="-17" name="Move forward" sid="3141314433162267" type="Soldier">
                            <param id="0" name="Distance">1</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="616379075581871">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="1688698051601851" type="UnitTarget">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">Soldier.UnitID</param>
                                </condition>
                                <condition id="-14" name="Pick by unique ID" sid="3662323401351822" type="FriendlySoldiers">
                                    <param id="0" name="Unique ID">Soldier.UID</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-8" name="Set angle" sid="9555366514863783" type="FriendlySoldiers">
                                    <param id="0" name="Angle">UnitTarget.Angle</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>Have Soldiers search for their path every now and then, in case they lost their way. This doesnt use the Hungarian Algorithm.</comment>
                <comment>This should not be the standard movement way.</comment>
                <variable constant="0" name="RotatingSpeedTemp" sid="5194548583130183" static="0" type="number">0</variable>
                <event-block sid="8350827153223631">
                    <conditions>
                        <condition id="-6" name="Every X seconds" sid="1535594773361957" type="System">
                            <param id="0" name="Interval (seconds)">5</param>
                        </condition>
                        <condition id="-11" name="For Each" sid="8262301974648916" type="System">
                            <param id="0" name="Object">Unit</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="7664757279320508" type="Soldier">
                            <param id="0" name="Instance variable">UnitID</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">Unit.UID</param>
                        </condition>
                        <condition id="-11" name="For Each" sid="6860797923142751" type="System">
                            <param id="0" name="Object">Soldier</param>
                        </condition>
                        <condition id="-14" name="Pick by unique ID" sid="978619040678755" type="SoldierCoordinates">
                            <param id="0" name="Unique ID">Soldier.SoldierCoordinatesID</param>
                        </condition>
                        <condition id="-8" name="Compare two values" sid="478775944483043" type="System">
                            <param id="0" name="First value">distance(Soldier.X,Soldier.Y,SoldierCoordinates.X, SoldierCoordinates.Y)</param>
                            <param id="1" name="Comparison">4</param>
                            <param id="2" name="Second value">16</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block any="1" sid="1216136847581901">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="7622653726258344" type="Unit">
                                    <param id="0" name="Instance variable">UnitStatus</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;passive&quot;</param>
                                </condition>
                                <condition disabled="1" id="-7" name="Compare instance variable" sid="9172905854308588" type="Unit">
                                    <param id="0" name="Instance variable">UnitStatus</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;fleeing&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="7609282744290971" type="System">
                                    <param id="0" name="Variable">RotatingSpeedTemp</param>
                                    <param id="1" name="Value">Soldier.Pathfinding_Soldier.RotateSpeed</param>
                                </action>
                                <action behavior="Pathfinding_Soldier" id="10" name="Set rotate speed" sid="7681892710668031" type="Soldier">
                                    <param id="0" name="Rotate speed">150</param>
                                </action>
                                <action behavior="Pathfinding_Soldier" id="0" name="Find path" sid="8151566481423745" type="Soldier">
                                    <param id="0" name="X">SoldierCoordinates.X</param>
                                    <param id="1" name="Y">SoldierCoordinates.Y</param>
                                </action>
                                <action behavior="Pathfinding_Soldier" id="10" name="Set rotate speed" sid="3367866029686519" type="Soldier">
                                    <param id="0" name="Rotate speed">RotatingSpeedTemp</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="329800814838137" title="Destroy">
            <sub-events>
                <comment>On Soldier Destroy</comment>
                <event-block sid="5707819632376088">
                    <conditions>
                        <condition id="-6" name="Every X seconds" sid="4694419671569742" type="System">
                            <param id="0" name="Interval (seconds)">1</param>
                        </condition>
                        <condition disabled="1" id="-11" name="For Each" sid="3797094167545184" type="System">
                            <param id="0" name="Object">Soldier</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="79038101448504" type="Soldier">
                            <param id="0" name="Instance variable">Health</param>
                            <param id="1" name="Comparison">3</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Destroy" sid="8676909217608994" type="Soldier" />
                    </actions>
                </event-block>
                <event-block sid="7427537928069591">
                    <conditions>
                        <condition id="-19" name="On destroyed" sid="8040554475421274" type="Soldier" />
                        <condition id="-7" name="Compare instance variable" sid="3553719482877794" type="HealthIndicator">
                            <param id="0" name="Instance variable">SoldierID</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">Soldier.UID</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="5853497999626219" type="SoldierCoordinates">
                            <param id="0" name="Instance variable">SoldierID</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">Soldier.UID</param>
                        </condition>
                        <condition id="-14" name="Pick by unique ID" sid="6117578724261492" type="Unit">
                            <param id="0" name="Unique ID">Soldier.UnitID</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="133830363179149" type="Legs">
                            <param id="0" name="Instance variable">bodyUID</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">Soldier.UID</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="7109102616347988" type="Heads">
                            <param id="0" name="Instance variable">bodyUID</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">Soldier.UID</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Destroy" sid="4928771614180327" type="HealthIndicator" />
                        <action id="-9" name="Destroy" sid="6971331984476257" type="SoldierCoordinates" />
                        <action id="-10" name="Set value" sid="2668506786950975" type="Unit">
                            <param id="0" name="Instance variable">ActualSoldierCount_Unit</param>
                            <param id="1" name="Value">Self.ActualSoldierCount_Unit-1</param>
                        </action>
                        <action id="-9" name="Destroy" sid="9637174831582141" type="Heads" />
                        <action id="-9" name="Destroy" sid="5708341711508694" type="Legs" />
                    </actions>
                    <sub-events>
                        <event-block sid="150157595514507">
                            <conditions>
                                <condition id="-7" inverted="1" name="Compare instance variable" sid="3561318174815438" type="Unit">
                                    <param id="0" name="Instance variable">UnitStatus</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;fleeing&quot;</param>
                                </condition>
                                <condition id="-3" name="Is on-screen" sid="9725343196062684" type="Soldier" />
                            </conditions>
                            <actions>
                                <action id="-3" name="Create object" sid="9663523318707381" type="System">
                                    <param id="0" name="Object to create">DeadSoldier</param>
                                    <param id="1" name="Layer">0</param>
                                    <param id="2" name="X">Soldier.X</param>
                                    <param id="3" name="Y">Soldier.Y</param>
                                </action>
                                <action id="-8" name="Set angle" sid="5322225663515836" type="DeadSoldier">
                                    <param id="0" name="Angle">random(0,360)</param>
                                </action>
                                <action id="-12" name="Subtract from" sid="6465642831231067" type="Unit">
                                    <param id="0" name="Instance variable">Morale</param>
                                    <param id="1" name="Value">5</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="6213841767203399">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="1444534563142049" type="Horse">
                                    <param id="0" name="Instance variable">bodyUID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">Soldier.UID</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Destroy" sid="5008321899259383" type="Horse" />
                            </actions>
                        </event-block>
                        <comment>This is used to make the unit coordinates compact after soldiers die</comment>
                        <variable constant="0" name="counterCoordinatesReset" sid="201736298642946" static="0" type="number">0</variable>
                        <event-block sid="5546874351173867">
                            <conditions>
                                <condition id="-19" name="Pick all" sid="4607113738837709" type="System">
                                    <param id="0" name="Object">Soldier</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="5661092346532158" type="Soldier">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">Unit.UID</param>
                                </condition>
                                <condition id="-11" name="For Each" sid="8305286132610937" type="System">
                                    <param id="0" name="Object">Soldier</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="4902727413771463" type="SoldierCoordinates">
                                    <param id="0" name="Instance variable">SoldierNumber</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">Soldier.SoldierNumber</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="8842990128828758" type="SoldierCoordinates">
                                    <param id="0" name="Instance variable">SoldierNumber</param>
                                    <param id="1" name="Value">counterCoordinatesReset</param>
                                </action>
                                <action id="-10" name="Set value" sid="3563693305843323" type="Soldier">
                                    <param id="0" name="Instance variable">SoldierNumber</param>
                                    <param id="1" name="Value">counterCoordinatesReset</param>
                                </action>
                                <action id="-10" name="Set value" sid="607908611102863" type="Soldier">
                                    <param id="0" name="Instance variable">SoldierCoordinatesID</param>
                                    <param id="1" name="Value">SoldierCoordinates.UID</param>
                                </action>
                                <action id="-9" name="Set value" sid="8552629352168721" type="System">
                                    <param id="0" name="Variable">counterCoordinatesReset</param>
                                    <param id="1" name="Value">counterCoordinatesReset+1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>On Unit Destroy</comment>
                <event-block sid="212048748449539">
                    <conditions>
                        <condition id="-6" name="Every X seconds" sid="5097901162336199" type="System">
                            <param id="0" name="Interval (seconds)">1</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="4620843872641615">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="7458036852040261" type="Unit">
                                    <param id="0" name="Instance variable">ActualSoldierCount_Unit</param>
                                    <param id="1" name="Comparison">3</param>
                                    <param id="2" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Destroy" sid="7187599438202813" type="Unit" />
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block disabled="1" sid="3367518418559248">
                    <conditions>
                        <condition id="-6" name="Every X seconds" sid="4506799501165011" type="System">
                            <param id="0" name="Interval (seconds)">1</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="2895582674209266">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="8205774373936312" type="Unit">
                                    <param id="0" name="Instance variable">UnitStatus</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;fleeing&quot;</param>
                                </condition>
                                <condition id="1" name="Is overlapping another object" sid="9714151127422962" type="Unit">
                                    <param id="0" name="Object">FieldBorder</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="6171997264770337" type="Soldier">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">Unit.UID</param>
                                </condition>
                                <condition id="1" name="Is overlapping another object" sid="3326946272259938" type="Soldier">
                                    <param id="0" name="Object">FieldBorder</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Destroy" sid="592961019269355" type="Soldier" />
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="4587399272352508">
                    <conditions>
                        <condition id="-19" name="On destroyed" sid="1317201636613743" type="Unit" />
                        <condition id="-7" name="Compare instance variable" sid="8084243118721924" type="UnitTarget">
                            <param id="0" name="Instance variable">UnitID</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">Unit.UID</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="5898600078998826" type="BboxUnit">
                            <param id="0" name="Instance variable">UnitID</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">Unit.UID</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Destroy" sid="5654042827983259" type="UnitTarget" />
                        <action id="-9" name="Destroy" sid="2880287269966329" type="BboxUnit" />
                    </actions>
                    <sub-events>
                        <comment>Usually the unit is destroyed AFTER the soldiers - so this should almost never occur</comment>
                        <event-block sid="6725225852314686">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="3240810227493009" type="Soldier">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">Unit.UID</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Destroy" sid="9101693794519351" type="Soldier" />
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="2599106944854028" title="Combat">
            <sub-events>
                <event-group description="" sid="8788307361560388" title="Melee">
                    <sub-events>
                        <variable constant="0" name="friendlyX" sid="5472268310508924" static="0" type="number">0</variable>
                        <variable constant="0" name="friendlyY" sid="2915020781208621" static="0" type="number">0</variable>
                        <variable constant="0" name="friendlyUID" sid="9959671673913827" static="0" type="number">0</variable>
                        <variable constant="0" name="enemyX" sid="2605150410763261" static="0" type="number">0</variable>
                        <variable constant="0" name="enemyY" sid="9896998981323036" static="0" type="number">0</variable>
                        <comment>Fight between two units</comment>
                        <event-block sid="6895507317553299">
                            <conditions>
                                <condition id="-6" name="Every X seconds" sid="906277692842184" type="System">
                                    <param id="0" name="Interval (seconds)">1</param>
                                </condition>
                                <condition id="1" name="Is overlapping another object" sid="2528626171366543" type="FriendlyUnit">
                                    <param id="0" name="Object">EnemyUnit</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="8576047932930198">
                                    <conditions>
                                        <condition id="-14" name="Pick by unique ID" sid="4956585571606421" type="Unit">
                                            <param id="0" name="Unique ID">FriendlyUnit.UID</param>
                                        </condition>
                                        <condition id="-7" name="Compare instance variable" sid="1631658666651888" type="Soldier">
                                            <param id="0" name="Instance variable">UnitID</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">Unit.UID</param>
                                        </condition>
                                        <condition id="-7" inverted="1" name="Compare instance variable" sid="1377558475140979" type="Unit">
                                            <param id="0" name="Instance variable">UnitStatus</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;moving&quot;</param>
                                        </condition>
                                        <condition id="-7" inverted="1" name="Compare instance variable" sid="458986866405987" type="Unit">
                                            <param id="0" name="Instance variable">UnitStatus</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;arranging&quot;</param>
                                        </condition>
                                        <condition id="-7" inverted="1" name="Compare instance variable" sid="2307274389717154" type="Unit">
                                            <param id="0" name="Instance variable">UnitStatus</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;fleeing&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-10" name="Set value" sid="3913542035542491" type="Unit">
                                            <param id="0" name="Instance variable">UnitStatus</param>
                                            <param id="1" name="Value">&quot;fighting&quot;</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="4412584114660894">
                                            <conditions>
                                                <condition id="-7" inverted="1" name="Compare instance variable" sid="932216558456166" type="Unit">
                                                    <param id="0" name="Instance variable">UnitType</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;archers&quot;</param>
                                                </condition>
                                                <condition behavior="Pathfinding_Soldier" id="4" inverted="1" name="Is moving along path" sid="9705071775860528" type="Soldier" />
                                            </conditions>
                                            <actions>
                                                <action behavior="Pathfinding_Soldier" id="0" name="Find path" sid="2202729759886609" type="Soldier">
                                                    <param id="0" name="X">random(EnemyUnit.BBoxLeft,EnemyUnit.BBoxRight)</param>
                                                    <param id="1" name="Y">random(EnemyUnit.BBoxTop,EnemyUnit.BBoxBottom)</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="2061805766675856">
                                            <conditions>
                                                <condition id="-7" name="Compare instance variable" sid="6531754641153513" type="Unit">
                                                    <param id="0" name="Instance variable">UnitType</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;archers&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-10" name="Set value" sid="3169270741073535" type="Unit">
                                                    <param id="0" name="Instance variable">UnitStatus</param>
                                                    <param id="1" name="Value">&quot;backing away&quot;</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                                <event-block sid="7382436108267643">
                                    <conditions>
                                        <condition id="-14" name="Pick by unique ID" sid="1874806785176189" type="Unit">
                                            <param id="0" name="Unique ID">EnemyUnit.UID</param>
                                        </condition>
                                        <condition id="-7" name="Compare instance variable" sid="2249598380955381" type="Soldier">
                                            <param id="0" name="Instance variable">UnitID</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">Unit.UID</param>
                                        </condition>
                                        <condition id="-7" inverted="1" name="Compare instance variable" sid="7373413583751676" type="Unit">
                                            <param id="0" name="Instance variable">UnitStatus</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;moving&quot;</param>
                                        </condition>
                                        <condition id="-7" inverted="1" name="Compare instance variable" sid="6802026172562392" type="Unit">
                                            <param id="0" name="Instance variable">UnitStatus</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;arranging&quot;</param>
                                        </condition>
                                        <condition id="-7" inverted="1" name="Compare instance variable" sid="4220810641134733" type="Unit">
                                            <param id="0" name="Instance variable">UnitStatus</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;fleeing&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-10" name="Set value" sid="2354177966045651" type="Unit">
                                            <param id="0" name="Instance variable">UnitStatus</param>
                                            <param id="1" name="Value">&quot;fighting&quot;</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="3542381743868013">
                                            <conditions>
                                                <condition id="-7" inverted="1" name="Compare instance variable" sid="4089610442452495" type="Unit">
                                                    <param id="0" name="Instance variable">UnitType</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;archers&quot;</param>
                                                </condition>
                                                <condition behavior="Pathfinding_Soldier" id="4" inverted="1" name="Is moving along path" sid="6569575253471411" type="Soldier" />
                                            </conditions>
                                            <actions>
                                                <action behavior="Pathfinding_Soldier" id="0" name="Find path" sid="3173786588568043" type="Soldier">
                                                    <param id="0" name="X">random(FriendlyUnit.BBoxLeft,FriendlyUnit.BBoxRight)</param>
                                                    <param id="1" name="Y">random(FriendlyUnit.BBoxTop,FriendlyUnit.BBoxBottom)</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="6084689881839384">
                                            <conditions>
                                                <condition id="-7" name="Compare instance variable" sid="7900439011096567" type="Unit">
                                                    <param id="0" name="Instance variable">UnitType</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;archers&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-10" name="Set value" sid="3061342729615649" type="Unit">
                                                    <param id="0" name="Instance variable">UnitStatus</param>
                                                    <param id="1" name="Value">&quot;backing away&quot;</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <comment>If archers were backing away, and are far enough, stop. Fighting units return back to normal when far enough.</comment>
                        <event-block sid="5106439699203738">
                            <conditions>
                                <condition id="-6" name="Every X seconds" sid="7785824539682581" type="System">
                                    <param id="0" name="Interval (seconds)">1</param>
                                </condition>
                                <condition disabled="1" id="-11" name="For Each" sid="4444859686922432" type="System">
                                    <param id="0" name="Object">Unit</param>
                                </condition>
                                <condition id="1" inverted="1" name="Is overlapping another object" sid="3951792739766587" type="FriendlyUnit">
                                    <param id="0" name="Object">EnemyUnit</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="8180061034300815">
                                    <conditions>
                                        <condition id="-14" name="Pick by unique ID" sid="1418693684521808" type="Unit">
                                            <param id="0" name="Unique ID">FriendlyUnit.UID</param>
                                        </condition>
                                        <condition id="-7" inverted="1" name="Compare instance variable" sid="9003842376311433" type="Unit">
                                            <param id="0" name="Instance variable">UnitStatus</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;fleeing&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block sid="5835610401181566">
                                            <conditions>
                                                <condition id="-7" name="Compare instance variable" sid="4252070213264653" type="Unit">
                                                    <param id="0" name="Instance variable">UnitStatus</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;backing away&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-10" name="Set value" sid="4224851903759744" type="Unit">
                                                    <param id="0" name="Instance variable">UnitStatus</param>
                                                    <param id="1" name="Value">&quot;passive&quot;</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="744722783948742">
                                            <conditions>
                                                <condition id="-7" name="Compare instance variable" sid="3694093262546232" type="Unit">
                                                    <param id="0" name="Instance variable">UnitStatus</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;fighting&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-10" name="Set value" sid="241056454497562" type="Unit">
                                                    <param id="0" name="Instance variable">UnitStatus</param>
                                                    <param id="1" name="Value">&quot;passive&quot;</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                                <event-block sid="2863585768083098">
                                    <conditions>
                                        <condition id="-14" name="Pick by unique ID" sid="4203816116372597" type="Unit">
                                            <param id="0" name="Unique ID">EnemyUnit.UID</param>
                                        </condition>
                                        <condition id="-7" inverted="1" name="Compare instance variable" sid="2401036936067014" type="Unit">
                                            <param id="0" name="Instance variable">UnitStatus</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;fleeing&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block sid="5755370154141964">
                                            <conditions>
                                                <condition id="-7" name="Compare instance variable" sid="702763363913283" type="Unit">
                                                    <param id="0" name="Instance variable">UnitStatus</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;backing away&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-10" name="Set value" sid="1827350558148475" type="Unit">
                                                    <param id="0" name="Instance variable">UnitStatus</param>
                                                    <param id="1" name="Value">&quot;passive&quot;</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="1888930791951735">
                                            <conditions>
                                                <condition id="-7" name="Compare instance variable" sid="4635470297405962" type="Unit">
                                                    <param id="0" name="Instance variable">UnitStatus</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;fighting&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-10" name="Set value" sid="6785387195544315" type="Unit">
                                                    <param id="0" name="Instance variable">UnitStatus</param>
                                                    <param id="1" name="Value">&quot;passive&quot;</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <comment>Fight between two soldiers</comment>
                        <variable constant="0" name="ForceEnemy" sid="7224596822091336" static="0" type="number">0</variable>
                        <variable constant="0" name="ForceFriend" sid="6056749859418223" static="0" type="number">0</variable>
                        <variable constant="0" name="EnemyType" sid="7609609104173266" static="0" type="text"></variable>
                        <variable constant="0" name="FriendlyType" sid="5618488519386404" static="0" type="text"></variable>
                        <event-block sid="7257933548543162">
                            <conditions>
                                <condition disabled="1" id="-6" name="Every X seconds" sid="595558653539179" type="System">
                                    <param id="0" name="Interval (seconds)">0.1</param>
                                </condition>
                                <condition id="1" name="Is overlapping another object" sid="55819471153052" type="FriendlyUnit">
                                    <param id="0" name="Object">EnemyUnit</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="8117645472634698" type="EnemySoldiers">
                                    <param id="0" name="Instance variable">UnitIDEnemy</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">EnemyUnit.UID</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="7640195926355088" type="FriendlySoldiers">
                                    <param id="0" name="Instance variable">UnitIDFriendly</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">FriendlyUnit.UID</param>
                                </condition>
                                <condition id="1" name="Is overlapping another object" sid="6378978047586425" type="FriendlySoldiers">
                                    <param id="0" name="Object">EnemySoldiers</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="3440682485815613" type="System">
                                    <param id="0" name="Variable">ForceFriend</param>
                                    <param id="1" name="Value">random(900,1100)</param>
                                </action>
                                <action id="-9" name="Set value" sid="9414446836160298" type="System">
                                    <param id="0" name="Variable">ForceEnemy</param>
                                    <param id="1" name="Value">random(900,1100)</param>
                                </action>
                            </actions>
                            <sub-events>
                                <comment>get unit types</comment>
                                <event-block sid="4815271970928346">
                                    <conditions>
                                        <condition id="-14" name="Pick by unique ID" sid="7567095817947684" type="Unit">
                                            <param id="0" name="Unique ID">EnemyUnit.UID</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="3062335793890444" type="System">
                                            <param id="0" name="Variable">EnemyType</param>
                                            <param id="1" name="Value">Unit.UnitType</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="8719509562376407">
                                    <conditions>
                                        <condition id="-14" name="Pick by unique ID" sid="2271584172489097" type="Unit">
                                            <param id="0" name="Unique ID">FriendlyUnit.UID</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="2659257239609632" type="System">
                                            <param id="0" name="Variable">FriendlyType</param>
                                            <param id="1" name="Value">Unit.UnitType</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <comment>calculate injury for friendly soldier</comment>
                                <event-block sid="230276326618071">
                                    <conditions>
                                        <condition id="-14" name="Pick by unique ID" sid="4880504116417731" type="Unit">
                                            <param id="0" name="Unique ID">FriendlyUnit.UID</param>
                                        </condition>
                                        <condition id="-7" inverted="1" name="Compare instance variable" sid="6836767300115845" type="Unit">
                                            <param id="0" name="Instance variable">UnitStatus</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;fleeing&quot;</param>
                                        </condition>
                                        <condition id="-11" name="For Each" sid="2481176752188657" type="System">
                                            <param id="0" name="Object">FriendlySoldiers</param>
                                        </condition>
                                        <condition id="-14" name="Pick by unique ID" sid="9764951648229807" type="Soldier">
                                            <param id="0" name="Unique ID">FriendlySoldiers.UID</param>
                                        </condition>
                                        <condition id="-7" name="Compare instance variable" sid="2680897974478884" type="HealthIndicator">
                                            <param id="0" name="Instance variable">SoldierID</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">Soldier.UID</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action behavior="Pathfinding_Soldier" id="2" name="Stop" sid="7543705659809692" type="Soldier" />
                                        <action id="-22" name="Set angle toward position" sid="3517338209937451" type="Soldier">
                                            <param id="0" name="X">EnemySoldiers.X</param>
                                            <param id="1" name="Y">EnemySoldiers.Y</param>
                                        </action>
                                        <action behavior="Pin_Soldier" disabled="1" id="0" name="Pin to object" sid="1485954227820167" type="Soldier">
                                            <param id="0" name="Pin to">EnemySoldiers</param>
                                            <param id="1" name="Mode">4</param>
                                        </action>
                                        <action behavior="Physics_Soldier" id="1" name="Apply force towards position" sid="4513868088240439" type="Soldier">
                                            <param id="0" name="Force">ForceFriend</param>
                                            <param id="1" name="X">EnemySoldiers.X</param>
                                            <param id="2" name="Y">EnemySoldiers.Y</param>
                                            <param id="3" name="Image point">0</param>
                                        </action>
                                        <action id="0" name="Set text" sid="8435333187156715" type="HealthIndicator">
                                            <param id="0" name="Text">round(Soldier.Health)</param>
                                        </action>
                                        <action id="-20" name="Rotate toward angle" sid="1941195359173346" type="Soldier">
                                            <param id="0" name="Degrees">6</param>
                                            <param id="1" name="Angle">Self.Angle+random(-12,12)</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <comment>injure friendly soldier</comment>
                                        <event-block sid="5819586040974401">
                                            <conditions>
                                                <condition id="-14" name="Compare variable" sid="2393099269527405" type="System">
                                                    <param id="0" name="Variable">EnemyType</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;cavalry&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-12" name="Subtract from" sid="3222480632442144" type="Soldier">
                                                    <param id="0" name="Instance variable">Health</param>
                                                    <param id="1" name="Value">ForceEnemy/100</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="5917307375933481">
                                            <conditions>
                                                <condition id="-14" name="Compare variable" sid="3304865531892085" type="System">
                                                    <param id="0" name="Variable">EnemyType</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;swordsmen&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-12" name="Subtract from" sid="5456282718006373" type="Soldier">
                                                    <param id="0" name="Instance variable">Health</param>
                                                    <param id="1" name="Value">ForceEnemy/100</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="6551868722250351">
                                            <conditions>
                                                <condition id="-14" name="Compare variable" sid="1597231781470551" type="System">
                                                    <param id="0" name="Variable">EnemyType</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;spearmen&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-12" name="Subtract from" sid="1155045149732449" type="Soldier">
                                                    <param id="0" name="Instance variable">Health</param>
                                                    <param id="1" name="Value">ForceEnemy/100</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="7269773595299307">
                                            <conditions>
                                                <condition id="-14" name="Compare variable" sid="5743124234538545" type="System">
                                                    <param id="0" name="Variable">EnemyType</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;archers&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-12" name="Subtract from" sid="8674031724770988" type="Soldier">
                                                    <param id="0" name="Instance variable">Health</param>
                                                    <param id="1" name="Value">ForceEnemy/100</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                                <comment>calculate injury for enemy soldier</comment>
                                <event-block sid="7247022253686402">
                                    <conditions>
                                        <condition id="-14" name="Pick by unique ID" sid="504529257612933" type="Unit">
                                            <param id="0" name="Unique ID">EnemyUnit.UID</param>
                                        </condition>
                                        <condition id="-7" inverted="1" name="Compare instance variable" sid="6038812551018584" type="Unit">
                                            <param id="0" name="Instance variable">UnitStatus</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;fleeing&quot;</param>
                                        </condition>
                                        <condition id="-11" name="For Each" sid="3430155002792428" type="System">
                                            <param id="0" name="Object">EnemySoldiers</param>
                                        </condition>
                                        <condition id="-14" name="Pick by unique ID" sid="4393597089808131" type="Soldier">
                                            <param id="0" name="Unique ID">EnemySoldiers.UID</param>
                                        </condition>
                                        <condition id="-7" name="Compare instance variable" sid="5763066067874213" type="HealthIndicator">
                                            <param id="0" name="Instance variable">SoldierID</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">Soldier.UID</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action behavior="Pathfinding_Soldier" id="2" name="Stop" sid="3895045126265598" type="Soldier" />
                                        <action id="-22" name="Set angle toward position" sid="5724029246463479" type="Soldier">
                                            <param id="0" name="X">FriendlySoldiers.X</param>
                                            <param id="1" name="Y">FriendlySoldiers.Y</param>
                                        </action>
                                        <action behavior="Physics_Soldier" id="1" name="Apply force towards position" sid="4294656087140659" type="Soldier">
                                            <param id="0" name="Force">ForceFriend</param>
                                            <param id="1" name="X">FriendlySoldiers.X</param>
                                            <param id="2" name="Y">FriendlySoldiers.Y</param>
                                            <param id="3" name="Image point">0</param>
                                        </action>
                                        <action id="0" name="Set text" sid="5719017338716308" type="HealthIndicator">
                                            <param id="0" name="Text">round(Soldier.Health)</param>
                                        </action>
                                        <action id="-20" name="Rotate toward angle" sid="275548301864603" type="Soldier">
                                            <param id="0" name="Degrees">6</param>
                                            <param id="1" name="Angle">Self.Angle+random(-12,12)</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <comment>injure enemy soldier</comment>
                                        <event-block sid="2846345289524191">
                                            <conditions>
                                                <condition id="-14" name="Compare variable" sid="2150855744881235" type="System">
                                                    <param id="0" name="Variable">EnemyType</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;cavalry&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-12" name="Subtract from" sid="4074837736642225" type="Soldier">
                                                    <param id="0" name="Instance variable">Health</param>
                                                    <param id="1" name="Value">ForceFriend/100</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="7697200061426447">
                                            <conditions>
                                                <condition id="-14" name="Compare variable" sid="4994308812079014" type="System">
                                                    <param id="0" name="Variable">EnemyType</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;swordsmen&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-12" name="Subtract from" sid="6873710519782152" type="Soldier">
                                                    <param id="0" name="Instance variable">Health</param>
                                                    <param id="1" name="Value">ForceFriend/100</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="3188222047935221">
                                            <conditions>
                                                <condition id="-14" name="Compare variable" sid="7202042225542146" type="System">
                                                    <param id="0" name="Variable">EnemyType</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;spearmen&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-12" name="Subtract from" sid="2842159550280723" type="Soldier">
                                                    <param id="0" name="Instance variable">Health</param>
                                                    <param id="1" name="Value">ForceFriend/100</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="3910548525739354">
                                            <conditions>
                                                <condition id="-14" name="Compare variable" sid="9427506618082104" type="System">
                                                    <param id="0" name="Variable">EnemyType</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;archers&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-12" name="Subtract from" sid="313916880604228" type="Soldier">
                                                    <param id="0" name="Instance variable">Health</param>
                                                    <param id="1" name="Value">ForceFriend/100</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-group>
                <event-group description="Archers" sid="5198288667036948" title="Distance">
                    <sub-events>
                        <comment>Set target for friendly archers</comment>
                        <event-block sid="1598825479057124">
                            <conditions>
                                <condition id="13" name="On hold" sid="610545484540288" type="Touch" />
                                <condition id="-8" name="Is boolean instance variable set" sid="6986264474043497" type="FriendlyArchers">
                                    <param id="0" name="Instance variable">IsSelected</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="7115432975185971" type="Soldier">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">FriendlyArchers.UID</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="3689332259768301">
                                    <conditions>
                                        <condition id="-14" name="Pick by unique ID" sid="4583593824033389" type="Archers">
                                            <param id="0" name="Unique ID">Soldier.UID</param>
                                        </condition>
                                        <condition id="-11" name="For Each" sid="5765337874454486" type="System">
                                            <param id="0" name="Object">Archers</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="14" name="Log" sid="2100736611242365" type="Browser">
                                            <param id="0" name="Type">0</param>
                                            <param id="1" name="Message">&quot;Shooting: &quot;&amp;Archers.UID</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="9240973079676611">
                                            <conditions>
                                                <condition id="-8" name="Is boolean instance variable set" sid="5153173321194032" type="Archers">
                                                    <param id="0" name="Instance variable">isShooting</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-15" name="Set visible" sid="7611503262263137" type="ArcherTarget">
                                                    <param id="0" name="Visibility">0</param>
                                                </action>
                                                <action id="-13" name="Set boolean" sid="2507526217828866" type="Archers">
                                                    <param id="0" name="Instance variable">isShooting</param>
                                                    <param id="1" name="Value">0</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="5538580294148338">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="753035763158715" type="System" />
                                            </conditions>
                                            <actions>
                                                <action id="-10" name="Set value" sid="6766268932878495" type="Archers">
                                                    <param id="0" name="Instance variable">ShootAtX</param>
                                                    <param id="1" name="Value">round(TouchX)</param>
                                                </action>
                                                <action id="-10" name="Set value" sid="2225720757274159" type="Archers">
                                                    <param id="0" name="Instance variable">ShootAtY</param>
                                                    <param id="1" name="Value">round(TouchY)</param>
                                                </action>
                                                <action id="-3" name="Set position" sid="5656483710826636" type="ArcherTarget">
                                                    <param id="0" name="X">Archers.ShootAtX</param>
                                                    <param id="1" name="Y">Archers.ShootAtY</param>
                                                </action>
                                                <action id="-15" name="Set visible" sid="8028898682843855" type="ArcherTarget">
                                                    <param id="0" name="Visibility">1</param>
                                                </action>
                                                <action id="2" name="Stop" sid="8696280343419113" type="Archers" />
                                                <action id="5" name="Set frame" sid="9185201003024781" type="Archers">
                                                    <param id="0" name="Frame number">2</param>
                                                </action>
                                                <action id="-13" name="Set boolean" sid="4933207684996605" type="Archers">
                                                    <param id="0" name="Instance variable">isShooting</param>
                                                    <param id="1" name="Value">1</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="524191626270306">
                            <conditions>
                                <condition id="-14" name="Pick by unique ID" sid="6674907265182718" type="Archers">
                                    <param id="0" name="Unique ID">Soldier.UID</param>
                                </condition>
                                <condition id="-1" name="Every tick" sid="949276873842329" type="System" />
                                <condition id="-7" name="Compare instance variable" sid="1994052754819078" type="Unit">
                                    <param id="0" name="Instance variable">UnitStatus</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;passive&quot;</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="8380504720835327" type="Unit">
                                    <param id="0" name="Instance variable">UnitType</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;archers&quot;</param>
                                </condition>
                                <condition id="-14" name="Pick by unique ID" sid="7170863274331182" type="FriendlyArchers">
                                    <param id="0" name="Unique ID">Soldier.UnitID</param>
                                </condition>
                                <condition id="-14" name="Pick by unique ID" sid="6674907265182718" type="Archers">
                                    <param id="0" name="Unique ID">Soldier.UID</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="8694912973052304">
                                    <conditions>
                                        <condition id="-11" name="For Each" sid="6899624097566413" type="System">
                                            <param id="0" name="Object">Archers</param>
                                        </condition>
                                        <condition id="-8" name="Is boolean instance variable set" sid="3380144673258475" type="Archers">
                                            <param id="0" name="Instance variable">isShooting</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-21" name="Rotate toward position" sid="2049335844289801" type="Archers">
                                            <param id="0" name="Degrees">2</param>
                                            <param id="1" name="X">Self.ShootAtX</param>
                                            <param id="2" name="Y">Self.ShootAtY</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <variable constant="0" name="ReloadTime" sid="9076291033486988" static="0" type="number">4</variable>
                        <event-block sid="5301789674949809">
                            <conditions>
                                <condition id="-6" name="Every X seconds" sid="2900855154721767" type="System">
                                    <param id="0" name="Interval (seconds)">ReloadTime</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="7704256715124373" type="Unit">
                                    <param id="0" name="Instance variable">UnitStatus</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;passive&quot;</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="154417143424711" type="Unit">
                                    <param id="0" name="Instance variable">UnitType</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;archers&quot;</param>
                                </condition>
                                <condition id="-14" name="Pick by unique ID" sid="1271121855414015" type="Archers">
                                    <param id="0" name="Unique ID">Soldier.UID</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="1890582585037837">
                                    <conditions>
                                        <condition id="-11" name="For Each" sid="9317628985886197" type="System">
                                            <param id="0" name="Object">Archers</param>
                                        </condition>
                                        <condition id="-8" name="Is boolean instance variable set" sid="4914144754599812" type="Archers">
                                            <param id="0" name="Instance variable">isShooting</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Spawn another object" sid="9800620400170509" type="Archers">
                                            <param id="0" name="Object">Arrow</param>
                                            <param id="1" name="Layer">1</param>
                                            <param id="2" name="Image point">0</param>
                                        </action>
                                        <action id="2" name="Stop" sid="2134474960856501" type="Arrow" />
                                        <action id="5" name="Set frame" sid="6244549141583584" type="Arrow">
                                            <param id="0" name="Frame number">0</param>
                                        </action>
                                        <action behavior="Bullet" id="3" name="Set angle of motion" sid="7251168433718885" type="Arrow">
                                            <param id="0" name="Angle">Self.Angle-random(-10,10)</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="5584365388702834">
                            <conditions>
                                <condition id="0" name="On collision with another object" sid="8171969517253613" type="Arrow">
                                    <param id="0" name="Object">EnemySoldiers</param>
                                </condition>
                                <condition id="-14" name="Pick by unique ID" sid="7093797342666977" type="Soldier">
                                    <param id="0" name="Unique ID">EnemySoldiers.UID</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="7941802962990484" type="HealthIndicator">
                                    <param id="0" name="Instance variable">SoldierID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">EnemySoldiers.UID</param>
                                </condition>
                                <condition id="-8" name="Compare two values" sid="1940451348979951" type="System">
                                    <param id="0" name="First value">random(Generalship,100)</param>
                                    <param id="1" name="Comparison">4</param>
                                    <param id="2" name="Second value">50</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="5" name="Set frame" sid="330353316926144" type="Arrow">
                                    <param id="0" name="Frame number">1</param>
                                </action>
                                <action behavior="Bullet" id="0" name="Set speed" sid="7936630903512118" type="Arrow">
                                    <param id="0" name="Speed">0</param>
                                </action>
                                <action behavior="Bullet" id="5" name="Set enabled" sid="9670614280843312" type="Arrow">
                                    <param id="0" name="State">0</param>
                                </action>
                                <action behavior="Pin" id="0" name="Pin to object" sid="515995574630963" type="Arrow">
                                    <param id="0" name="Pin to">Soldier</param>
                                    <param id="1" name="Mode">0</param>
                                </action>
                                <action id="-12" name="Subtract from" sid="3944277200783958" type="Soldier">
                                    <param id="0" name="Instance variable">Health</param>
                                    <param id="1" name="Value">4</param>
                                </action>
                                <action id="0" name="Set text" sid="8332384992715274" type="HealthIndicator">
                                    <param id="0" name="Text">round(Soldier.Health)</param>
                                </action>
                                <action id="0" name="Call function" sid="96738143773071" type="Function">
                                    <param id="0" name="Name">&quot;CheckHealth&quot;</param>
                                    <param id="1" name="Parameter {n}">Soldier.UID</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="5357382744415723">
                            <conditions>
                                <condition behavior="Bullet" id="1" name="Compare distance travelled" sid="8757754962633032" type="Arrow">
                                    <param id="0" name="Comparison">5</param>
                                    <param id="1" name="Distance">random(550,630)</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="1837049207675106">
                                    <conditions>
                                        <condition id="-8" name="Compare two values" sid="7418043027103613" type="System">
                                            <param id="0" name="First value">random(0,100)</param>
                                            <param id="1" name="Comparison">4</param>
                                            <param id="2" name="Second value">30</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="5" name="Set frame" sid="6114078174921397" type="Arrow">
                                            <param id="0" name="Frame number">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="7640438428134351">
                                    <conditions />
                                    <actions>
                                        <action behavior="Bullet" id="0" name="Set speed" sid="300232636957465" type="Arrow">
                                            <param id="0" name="Speed">0</param>
                                        </action>
                                        <action behavior="Bullet" id="5" name="Set enabled" sid="4148418903136435" type="Arrow">
                                            <param id="0" name="State">0</param>
                                        </action>
                                        <action id="11" name="Set collisions enabled" sid="8520923323335808" type="Arrow">
                                            <param id="0" name="Collisions">0</param>
                                        </action>
                                        <action id="-26" name="Move to layer" sid="8882087659342805" type="Arrow">
                                            <param id="0" name="Layer">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-group>
            </sub-events>
        </event-group>
        <event-group description="" sid="5162549116428409" title="UI">
            <sub-events>
                <comment>If there is already another selected unit, deselect it. Select the touched unit. Slow down time.</comment>
                <event-block sid="9297147512424364">
                    <conditions>
                        <condition id="0" name="On any touch start" sid="6231393557407741" type="Touch" />
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="5149085445566331" type="System">
                            <param id="0" name="Variable">TouchX</param>
                            <param id="1" name="Value">Touch.X</param>
                        </action>
                        <action id="-9" name="Set value" sid="6946378413264058" type="System">
                            <param id="0" name="Variable">TouchY</param>
                            <param id="1" name="Value">Touch.Y</param>
                        </action>
                        <action id="-9" name="Set value" sid="6622814622036977" type="System">
                            <param id="0" name="Variable">isTouching</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="-16" name="Wait" sid="5480643626083467" type="System">
                            <param id="0" name="Seconds">1.0</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="8722235053121834">
                    <conditions>
                        <condition id="1" name="On any touch end" sid="5603237947654331" type="Touch" />
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="1846322070771709" type="System">
                            <param id="0" name="Variable">isTouching</param>
                            <param id="1" name="Value">0</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="5406215548328467">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="789919870019361" type="Unit">
                                    <param id="0" name="Instance variable">UnitStatus</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;hasOrders&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="2936412933130232" type="Unit">
                                    <param id="0" name="Instance variable">UnitStatus</param>
                                    <param id="1" name="Value">&quot;preparesArranging&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>Mark selected</comment>
                <variable constant="0" name="TargetedUnit" sid="3935122164557882" static="0" type="number">9999</variable>
                <event-block sid="6306923425428308">
                    <conditions>
                        <condition id="4" name="Is touching object" sid="1075225668769826" type="Touch">
                            <param id="0" name="Object">FriendlySoldiers</param>
                        </condition>
                        <condition id="4" name="Is touching object" sid="3684551632302577" type="Touch">
                            <param id="0" name="Object">Soldier</param>
                        </condition>
                        <condition id="7" name="Compare touch speed" sid="9036947252527387" type="Touch">
                            <param id="0" name="Touch index">0</param>
                            <param id="1" name="Comparison">2</param>
                            <param id="2" name="Speed">3</param>
                        </condition>
                        <condition id="-4" name="Trigger once while true" sid="9128603765690275" type="System" />
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="1666123825071363" type="System">
                            <param id="0" name="Variable">TargetedUnit</param>
                            <param id="1" name="Value">Soldier.UnitID</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="632739584845954">
                            <conditions>
                                <condition id="-8" name="Is boolean instance variable set" sid="1447521660793354" type="FriendlyUnit">
                                    <param id="0" name="Instance variable">IsSelected</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="8167659413525106" type="UnitTarget">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">FriendlyUnit.UID</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="2715565984030212" type="SoldierCoordinates">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">FriendlyUnit.UID</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="7260664215196969" type="HealthIndicator">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">FriendlyUnit.UID</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-13" name="Set boolean" sid="2564985313896669" type="FriendlyUnit">
                                    <param id="0" name="Instance variable">IsSelected</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action id="-15" name="Set visible" sid="846236641291583" type="UnitTarget">
                                    <param id="0" name="Visibility">0</param>
                                </action>
                                <action id="-15" name="Set visible" sid="3220535206833761" type="SoldierCoordinates">
                                    <param id="0" name="Visibility">0</param>
                                </action>
                                <action id="-15" name="Set visible" sid="9428042251643695" type="HealthIndicator">
                                    <param id="0" name="Visibility">0</param>
                                </action>
                                <action id="-9" name="Set value" sid="8054025533304567" type="System">
                                    <param id="0" name="Variable">unitIsSelected</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                            </actions>
                            <sub-events>
                                <comment></comment>
                                <event-block sid="983235235131813">
                                    <conditions>
                                        <condition id="-19" name="Pick all" sid="453555335960018" type="System">
                                            <param id="0" name="Object">Soldier</param>
                                        </condition>
                                        <condition id="-7" name="Compare instance variable" sid="212542533685529" type="Soldier">
                                            <param id="0" name="Instance variable">UnitID</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">FriendlyUnit.UID</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="5" name="Set frame" sid="9184222135395966" type="Soldier">
                                            <param id="0" name="Frame number">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="4530517982184512">
                            <conditions>
                                <condition id="-22" name="Else" sid="5648578433445705" type="System" />
                                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="7684971167504052" type="FriendlyUnit">
                                    <param id="0" name="Instance variable">IsSelected</param>
                                </condition>
                                <condition id="-14" name="Pick by unique ID" sid="5933940195461107" type="FriendlyUnit">
                                    <param id="0" name="Unique ID">TargetedUnit</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="9738728620424365" type="UnitTarget">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">FriendlyUnit.UID</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="2591568614377289" type="SoldierCoordinates">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">FriendlyUnit.UID</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="3561133779513343" type="HealthIndicator">
                                    <param id="0" name="Instance variable">UnitID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">FriendlyUnit.UID</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-13" name="Set boolean" sid="9175911512023712" type="FriendlyUnit">
                                    <param id="0" name="Instance variable">IsSelected</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                                <action id="-13" name="Set time scale" sid="9480938057218402" type="System">
                                    <param id="0" name="Time scale">0.1</param>
                                </action>
                                <action id="-15" name="Set visible" sid="3373953939922681" type="UnitTarget">
                                    <param id="0" name="Visibility">1</param>
                                </action>
                                <action id="-15" name="Set visible" sid="2011683245840331" type="SoldierCoordinates">
                                    <param id="0" name="Visibility">1</param>
                                </action>
                                <action id="-15" name="Set visible" sid="5734608615450847" type="HealthIndicator">
                                    <param id="0" name="Visibility">1</param>
                                </action>
                                <action id="-9" name="Set value" sid="3065053001421245" type="System">
                                    <param id="0" name="Variable">unitIsSelected</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                            <sub-events>
                                <comment>set this to the frame marked as &apos;selected&apos;</comment>
                                <event-block sid="7450831925761637">
                                    <conditions>
                                        <condition id="-19" name="Pick all" sid="1121157959260005" type="System">
                                            <param id="0" name="Object">Soldier</param>
                                        </condition>
                                        <condition id="-7" name="Compare instance variable" sid="1317240723570061" type="Soldier">
                                            <param id="0" name="Instance variable">UnitID</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">FriendlyUnit.UID</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="5" name="Set frame" sid="8248519721276954" type="Soldier">
                                            <param id="0" name="Frame number">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="153996645022684">
                    <conditions>
                        <condition id="17" name="On tap object" sid="5399278076305081" type="Touch">
                            <param id="0" name="Object">Tilemap_Dekorum_L3</param>
                        </condition>
                        <condition id="4" inverted="1" name="Is touching object" sid="466416397704909" type="Touch">
                            <param id="0" name="Object">Soldier</param>
                        </condition>
                        <condition id="-4" name="Trigger once while true" sid="4891165876692553" type="System" />
                    </conditions>
                    <actions>
                        <action id="-13" name="Set boolean" sid="7638465161167791" type="FriendlyUnit">
                            <param id="0" name="Instance variable">IsSelected</param>
                            <param id="1" name="Value">0</param>
                        </action>
                        <action id="-15" name="Set visible" sid="6028878203401055" type="UnitTarget">
                            <param id="0" name="Visibility">0</param>
                        </action>
                        <action id="-15" name="Set visible" sid="6404773872121343" type="SoldierCoordinates">
                            <param id="0" name="Visibility">0</param>
                        </action>
                        <action id="-15" name="Set visible" sid="8554639050888529" type="HealthIndicator">
                            <param id="0" name="Visibility">0</param>
                        </action>
                        <action id="-13" name="Set time scale" sid="2487752210017231" type="System">
                            <param id="0" name="Time scale">defaultTimeScale</param>
                        </action>
                        <action id="-9" name="Set value" sid="5982695287193827" type="System">
                            <param id="0" name="Variable">unitIsSelected</param>
                            <param id="1" name="Value">0</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="3171090398018059">
                            <conditions>
                                <condition id="-19" name="Pick all" sid="9795745901523895" type="System">
                                    <param id="0" name="Object">Soldier</param>
                                </condition>
                                <condition id="-11" name="For Each" sid="7433225025564787" type="System">
                                    <param id="0" name="Object">Soldier</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="5" name="Set frame" sid="593588106101971" type="Soldier">
                                    <param id="0" name="Frame number">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>If touching and a unit is selected, place the unit target</comment>
                <event-block sid="6837962903773777">
                    <conditions>
                        <condition id="2" name="Is in touch" sid="873206585036182" type="Touch" />
                        <condition id="-8" name="Is boolean instance variable set" sid="3068769956795497" type="FriendlyUnit">
                            <param id="0" name="Instance variable">IsSelected</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="7674307859408868" type="UnitTarget">
                            <param id="0" name="Instance variable">UnitID</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">FriendlyUnit.UID</param>
                        </condition>
                        <condition id="-14" name="Pick by unique ID" sid="3361760037013877" type="Unit">
                            <param id="0" name="Unique ID">FriendlyUnit.UID</param>
                        </condition>
                        <condition id="-7" inverted="1" name="Compare instance variable" sid="7383566199747222" type="Unit">
                            <param id="0" name="Instance variable">UnitStatus</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">&quot;fleeing&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <comment>Set position and angle if user is dragging (touch width above min limit)</comment>
                        <event-block sid="9465223359389789">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="3004419736715436" type="System">
                                    <param id="0" name="First value">distance(TouchX,TouchY,Touch.X,Touch.Y)</param>
                                    <param id="1" name="Comparison">4</param>
                                    <param id="2" name="Second value">Soldier.Height</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-1" name="Set X" sid="4701890359644332" type="UnitTarget">
                                    <param id="0" name="X">TouchX</param>
                                </action>
                                <action id="-2" name="Set Y" sid="3424665853211959" type="UnitTarget">
                                    <param id="0" name="Y">TouchY</param>
                                </action>
                                <action id="-8" name="Set angle" sid="3346726043156196" type="UnitTarget">
                                    <param id="0" name="Angle">angle(TouchX,TouchY,Touch.X,Touch.Y)-90</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="3415206393258102">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="3656318540391619" type="SoldierCoordinates">
                                            <param id="0" name="Instance variable">UnitID</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">FriendlyUnit.UID</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Call function" sid="8732368173350332" type="Function">
                                            <param id="0" name="Name">&quot;PositionAllSoldiers&quot;</param>
                                            <param id="1" name="Parameter {n}">UnitTarget.UID</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <comment>Set width only if touch-width is between defined limits</comment>
                        <event-block sid="8197091539904645">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="8291252766161581" type="System">
                                    <param id="0" name="First value">distance(TouchX,TouchY,Touch.X,Touch.Y)</param>
                                    <param id="1" name="Comparison">2</param>
                                    <param id="2" name="Second value">Soldier.Height*Soldier.Count</param>
                                </condition>
                                <condition id="-8" name="Compare two values" sid="3159763754899309" type="System">
                                    <param id="0" name="First value">distance(TouchX,TouchY,Touch.X,Touch.Y)</param>
                                    <param id="1" name="Comparison">4</param>
                                    <param id="2" name="Second value">Soldier.Height</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-6" name="Set height" sid="9380084876480341" type="UnitTarget">
                                    <param id="0" name="Height">distance(TouchX,TouchY,Touch.X,Touch.Y)</param>
                                </action>
                                <action id="-5" name="Set width" sid="4878325903760391" type="UnitTarget">
                                    <param id="0" name="Width">(FriendlyUnit.Width*FriendlyUnit.Height)/distance(TouchX,TouchY,Touch.X,Touch.Y)</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="Moving the mouse to the edge of the window to scroll." sid="2427417006224015" title="Scrolling and Zoom">
            <sub-events>
                <comment>Use the mouse wheel to do a basic zoom effect.</comment>
                <event-block sid="9205574304062273">
                    <conditions>
                        <condition id="8" name="On mouse wheel" sid="290011909352877" type="Mouse">
                            <param id="0" name="Direction">0</param>
                        </condition>
                        <condition id="-8" name="Compare two values" sid="4837178184224983" type="System">
                            <param id="0" name="First value">LayoutScale</param>
                            <param id="1" name="Comparison">4</param>
                            <param id="2" name="Second value">0.75</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-20" name="Set layout scale" sid="7961525825287564" type="System">
                            <param id="0" name="Scale">LayoutScale - 0.1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="8557957607403434">
                    <conditions>
                        <condition id="8" name="On mouse wheel" sid="5799382025332467" type="Mouse">
                            <param id="0" name="Direction">1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-20" name="Set layout scale" sid="7510194347575922" type="System">
                            <param id="0" name="Scale">LayoutScale + 0.1</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <variable constant="0" name="IsDragging" sid="1347644531905722" static="0" type="number">0</variable>
        <variable constant="0" name="DragMouseX" sid="4264301041250469" static="0" type="number">0</variable>
        <variable constant="0" name="DragMouseY" sid="2230190876577247" static="0" type="number">0</variable>
        <variable constant="0" name="DragScrollX" sid="2733561567034518" static="0" type="number">0</variable>
        <variable constant="0" name="DragScrollY" sid="297668214204914" static="0" type="number">0</variable>
        <event-block sid="6935463622635366">
            <conditions>
                <condition id="2" name="Is in touch" sid="9125144407158061" type="Touch" />
                <condition id="-14" name="Compare variable" sid="9129380843603661" type="System">
                    <param id="0" name="Variable">unitIsSelected</param>
                    <param id="1" name="Comparison">0</param>
                    <param id="2" name="Value">0</param>
                </condition>
            </conditions>
            <actions>
                <action id="-9" name="Set value" sid="4346812275480077" type="System">
                    <param id="0" name="Variable">IsDragging</param>
                    <param id="1" name="Value">1</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="9779280435079124">
            <conditions>
                <condition id="0" name="On any touch start" sid="5794807910889483" type="Touch" />
            </conditions>
            <actions>
                <action id="-9" name="Set value" sid="2738418535726224" type="System">
                    <param id="0" name="Variable">DragMouseX</param>
                    <param id="1" name="Value">Touch.AbsoluteX</param>
                </action>
                <action id="-9" name="Set value" sid="8759950976427885" type="System">
                    <param id="0" name="Variable">DragMouseY</param>
                    <param id="1" name="Value">Touch.AbsoluteY</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="4837026767226186">
            <conditions>
                <condition id="2" inverted="1" name="Is in touch" sid="311910828769117" type="Touch" />
            </conditions>
            <actions>
                <action id="-9" name="Set value" sid="5432234591620755" type="System">
                    <param id="0" name="Variable">IsDragging</param>
                    <param id="1" name="Value">0</param>
                </action>
                <action id="-9" name="Set value" sid="5369380892744937" type="System">
                    <param id="0" name="Variable">DragScrollX</param>
                    <param id="1" name="Value">scrollx</param>
                </action>
                <action id="-9" name="Set value" sid="5870061754925465" type="System">
                    <param id="0" name="Variable">DragScrollY</param>
                    <param id="1" name="Value">scrollY</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="7263108737148436">
            <conditions>
                <condition id="-14" name="Compare variable" sid="2977087063491805" type="System">
                    <param id="0" name="Variable">IsDragging</param>
                    <param id="1" name="Comparison">0</param>
                    <param id="2" name="Value">1</param>
                </condition>
            </conditions>
            <actions>
                <action id="-7" name="Scroll to position" sid="3693974493935579" type="System">
                    <param id="0" name="X">DragScrollX+DragMouseX-Touch.AbsoluteX</param>
                    <param id="1" name="Y">DragScrollY+DragMouseY-Touch.AbsoluteY</param>
                </action>
            </actions>
        </event-block>
    </events>
</c2eventsheet>
